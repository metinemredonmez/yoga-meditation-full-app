{
    "openapi": "3.0.3",
    "info": {
        "title": "Yoga App REST API",
        "version": "1.0.0",
        "description": "RESTful API for the Yoga application, including authentication, class management, bookings, payments, and notifications."
    },
    "servers": [
        {
            "url": "http://localhost:4000",
            "description": "Local development"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        },
        "schemas": {
            "HealthResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "example": "ok"
                    }
                }
            },
            "User": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    },
                    "phoneNumber": {
                        "type": "string",
                        "nullable": true
                    },
                    "bio": {
                        "type": "string",
                        "nullable": true
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "ADMIN",
                            "TEACHER",
                            "STUDENT"
                        ]
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "SignupRequest": {
                "type": "object",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "password": {
                        "type": "string",
                        "minLength": 8
                    },
                    "firstName": {
                        "type": "string",
                        "minLength": 1,
                        "nullable": true
                    },
                    "lastName": {
                        "type": "string",
                        "minLength": 1,
                        "nullable": true
                    },
                    "phoneNumber": {
                        "type": "string"
                    },
                    "bio": {
                        "type": "string"
                    }
                }
            },
            "LoginRequest": {
                "type": "object",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "password": {
                        "type": "string"
                    }
                }
            },
            "AuthTokens": {
                "type": "object",
                "properties": {
                    "accessToken": {
                        "type": "string"
                    },
                    "refreshToken": {
                        "type": "string"
                    }
                }
            },
            "AuthResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    },
                    "tokens": {
                        "$ref": "#/components/schemas/AuthTokens"
                    }
                }
            },
            "UpdateUserRequest": {
                "type": "object",
                "properties": {
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    },
                    "phoneNumber": {
                        "type": "string"
                    },
                    "bio": {
                        "type": "string"
                    }
                }
            },
            "Tag": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "kind": {
                        "type": "string",
                        "enum": [
                            "LEVEL",
                            "FOCUS",
                            "EQUIPMENT"
                        ]
                    },
                    "name": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    }
                }
            },
            "ProgramSession": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "order": {
                        "type": "integer"
                    },
                    "title": {
                        "type": "string"
                    },
                    "durationMin": {
                        "type": "integer"
                    },
                    "videoUrl": {
                        "type": "string",
                        "nullable": true
                    },
                    "poseIds": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "ProgramSummary": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "level": {
                        "type": "string",
                        "enum": [
                            "BEGINNER",
                            "INTERMEDIATE",
                            "ADVANCED"
                        ]
                    },
                    "durationMin": {
                        "type": "integer"
                    },
                    "coverUrl": {
                        "type": "string",
                        "nullable": true
                    },
                    "sessionCount": {
                        "type": "integer"
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Tag"
                        }
                    }
                }
            },
            "ProgramDetail": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ProgramSummary"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "sessions": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/ProgramSession"
                                }
                            }
                        }
                    }
                ]
            },
            "ProgramUpsertRequest": {
                "type": "object",
                "required": [
                    "title",
                    "description",
                    "level",
                    "durationMin"
                ],
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "level": {
                        "type": "string",
                        "enum": [
                            "BEGINNER",
                            "INTERMEDIATE",
                            "ADVANCED"
                        ]
                    },
                    "durationMin": {
                        "type": "integer"
                    },
                    "coverUrl": {
                        "type": "string",
                        "nullable": true
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Array of tag slugs to associate with the program"
                    }
                }
            },
            "ProgramSessionUpsertRequest": {
                "type": "object",
                "required": [
                    "order",
                    "title",
                    "durationMin"
                ],
                "properties": {
                    "order": {
                        "type": "integer"
                    },
                    "title": {
                        "type": "string"
                    },
                    "durationMin": {
                        "type": "integer"
                    },
                    "videoUrl": {
                        "type": "string",
                        "nullable": true
                    },
                    "poseIds": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "ChallengeSummary": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "startAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "endAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "targetDays": {
                        "type": "integer"
                    },
                    "coverUrl": {
                        "type": "string",
                        "nullable": true
                    },
                    "enrollmentCount": {
                        "type": "integer"
                    },
                    "enrolled": {
                        "type": "boolean"
                    }
                }
            },
            "ChallengeDetail": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ChallengeSummary"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "completedDays": {
                                "type": "integer",
                                "nullable": true
                            },
                            "totalCompletions": {
                                "type": "integer"
                            }
                        }
                    }
                ]
            },
            "ChallengeCreateRequest": {
                "type": "object",
                "required": [
                    "title",
                    "description",
                    "startAt",
                    "endAt",
                    "targetDays"
                ],
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "startAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "endAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "targetDays": {
                        "type": "integer"
                    },
                    "coverUrl": {
                        "type": "string"
                    }
                }
            },
            "ChallengeUpdateRequest": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "startAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "endAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "targetDays": {
                        "type": "integer"
                    },
                    "coverUrl": {
                        "type": "string"
                    }
                }
            },
            "ChallengeCheckRequest": {
                "type": "object",
                "properties": {
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "programSessionId": {
                        "type": "string"
                    }
                }
            },
            "DailyCheck": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "challengeId": {
                        "type": "string",
                        "nullable": true
                    },
                    "programSessionId": {
                        "type": "string",
                        "nullable": true
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ProgressSummary": {
                "type": "object",
                "properties": {
                    "totalMinutes": {
                        "type": "integer"
                    },
                    "completedSessions": {
                        "type": "integer"
                    },
                    "streak": {
                        "type": "integer"
                    }
                }
            },
            "PlannerEntry": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "itemType": {
                        "type": "string",
                        "enum": [
                            "PROGRAM_SESSION",
                            "CLASS"
                        ]
                    },
                    "plannedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "programSession": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "title": {
                                "type": "string"
                            },
                            "durationMin": {
                                "type": "integer"
                            },
                            "program": {
                                "type": "object",
                                "properties": {
                                    "id": {
                                        "type": "string"
                                    },
                                    "title": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "class": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "title": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string",
                                "nullable": true
                            },
                            "schedule": {
                                "type": "string",
                                "format": "date-time"
                            }
                        }
                    }
                }
            },
            "PlannerEntryCreateRequest": {
                "type": "object",
                "required": [
                    "itemType",
                    "itemId",
                    "plannedAt"
                ],
                "properties": {
                    "itemType": {
                        "type": "string",
                        "enum": [
                            "PROGRAM_SESSION",
                            "CLASS"
                        ]
                    },
                    "itemId": {
                        "type": "string"
                    },
                    "plannedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "Pose": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "sanskritName": {
                        "type": "string",
                        "nullable": true
                    },
                    "englishName": {
                        "type": "string"
                    },
                    "difficulty": {
                        "type": "string",
                        "enum": [
                            "BEGINNER",
                            "INTERMEDIATE",
                            "ADVANCED"
                        ]
                    },
                    "bodyArea": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "imageUrl": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "PoseUpsertRequest": {
                "type": "object",
                "required": [
                    "englishName",
                    "difficulty",
                    "bodyArea",
                    "description"
                ],
                "properties": {
                    "sanskritName": {
                        "type": "string"
                    },
                    "englishName": {
                        "type": "string"
                    },
                    "difficulty": {
                        "type": "string",
                        "enum": [
                            "BEGINNER",
                            "INTERMEDIATE",
                            "ADVANCED"
                        ]
                    },
                    "bodyArea": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "imageUrl": {
                        "type": "string"
                    }
                }
            },
            "Class": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "schedule": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "instructorId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ClassCreateRequest": {
                "type": "object",
                "required": [
                    "title",
                    "schedule",
                    "instructorId"
                ],
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "schedule": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "instructorId": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            },
            "ClassUpdateRequest": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "schedule": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "instructorId": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            },
            "Booking": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "classId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "userId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "PENDING",
                            "CONFIRMED",
                            "CANCELLED"
                        ]
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "BookingRequest": {
                "type": "object",
                "required": [
                    "classId"
                ],
                "properties": {
                    "classId": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            },
            "Payment": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "provider": {
                        "type": "string",
                        "enum": [
                            "STRIPE",
                            "IYZICO"
                        ]
                    },
                    "amount": {
                        "type": "number",
                        "format": "float"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "PENDING",
                            "COMPLETED",
                            "FAILED",
                            "CANCELLED"
                        ]
                    },
                    "transactionId": {
                        "type": "string",
                        "nullable": true
                    },
                    "bookingId": {
                        "type": "string",
                        "nullable": true
                    },
                    "subscriptionId": {
                        "type": "string",
                        "nullable": true
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CheckoutRequest": {
                "type": "object",
                "required": [
                    "plan"
                ],
                "properties": {
                    "plan": {
                        "type": "string"
                    },
                    "provider": {
                        "type": "string",
                        "enum": [
                            "stripe",
                            "iyzico"
                        ],
                        "default": "stripe"
                    },
                    "successUrl": {
                        "type": "string",
                        "format": "uri"
                    },
                    "cancelUrl": {
                        "type": "string",
                        "format": "uri"
                    }
                }
            },
            "CheckoutResponse": {
                "type": "object",
                "properties": {
                    "paymentId": {
                        "type": "string"
                    },
                    "provider": {
                        "type": "string",
                        "enum": [
                            "STRIPE",
                            "IYZICO"
                        ]
                    },
                    "checkoutSessionId": {
                        "type": "string",
                        "nullable": true
                    },
                    "checkoutUrl": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "StripeWebhookPayload": {
                "type": "object",
                "required": [
                    "type",
                    "data"
                ],
                "properties": {
                    "type": {
                        "type": "string",
                        "example": "invoice.paid"
                    },
                    "data": {
                        "type": "object",
                        "properties": {
                            "userId": {
                                "type": "string"
                            },
                            "plan": {
                                "type": "string"
                            },
                            "amount": {
                                "type": "number",
                                "format": "float"
                            },
                            "currency": {
                                "type": "string"
                            },
                            "transactionId": {
                                "type": "string"
                            },
                            "currentPeriodEnd": {
                                "type": "string",
                                "format": "date-time"
                            },
                            "cancelAtPeriodEnd": {
                                "type": "boolean"
                            },
                            "status": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "NotificationTestRequest": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "phoneNumber": {
                        "type": "string"
                    },
                    "deviceToken": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "subject": {
                        "type": "string"
                    }
                }
            },
            "ReminderRequest": {
                "type": "object",
                "properties": {
                    "classId": {
                        "type": "string"
                    },
                    "programSessionId": {
                        "type": "string"
                    },
                    "sendAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "channel": {
                        "type": "string",
                        "enum": [
                            "email",
                            "sms",
                            "push"
                        ],
                        "default": "email"
                    }
                },
                "anyOf": [
                    {
                        "required": [
                            "classId"
                        ]
                    },
                    {
                        "required": [
                            "programSessionId"
                        ]
                    }
                ]
            },
            "MediaUploadRequest": {
                "type": "object",
                "required": [
                    "filename",
                    "contentType"
                ],
                "properties": {
                    "filename": {
                        "type": "string"
                    },
                    "contentType": {
                        "type": "string"
                    }
                }
            },
            "MediaUploadResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "uploadUrl": {
                        "type": "string"
                    },
                    "fileUrl": {
                        "type": "string"
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "AdminUsageReport": {
                "type": "object",
                "properties": {
                    "generatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "totalUsers": {
                        "type": "integer",
                        "example": 1280
                    },
                    "activeUsersLast7d": {
                        "type": "integer",
                        "example": 312
                    },
                    "streakDistribution": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "length": {
                                    "type": "integer",
                                    "description": "Longest streak of consecutive booking days",
                                    "example": 4
                                },
                                "count": {
                                    "type": "integer",
                                    "description": "Number of users who reached this streak",
                                    "example": 47
                                }
                            }
                        }
                    },
                    "topChallenges": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "example": "chlg_123"
                                },
                                "title": {
                                    "type": "string",
                                    "example": "Spring Detox Challenge"
                                },
                                "enrollmentCount": {
                                    "type": "integer",
                                    "example": 87
                                }
                            }
                        }
                    }
                }
            },
            "AdminUsageReportResponse": {
                "type": "object",
                "properties": {
                    "report": {
                        "$ref": "#/components/schemas/AdminUsageReport"
                    }
                }
            },
            "AdminRevenueReport": {
                "type": "object",
                "properties": {
                    "generatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "mrr": {
                        "type": "number",
                        "format": "float",
                        "example": 4280.5
                    },
                    "arr": {
                        "type": "number",
                        "format": "float",
                        "example": 51366
                    },
                    "activeSubscriptions": {
                        "type": "integer",
                        "example": 640
                    },
                    "failedPayments": {
                        "type": "object",
                        "properties": {
                            "countLast30d": {
                                "type": "integer",
                                "example": 12
                            },
                            "totalAmountLast30d": {
                                "type": "number",
                                "format": "float",
                                "example": 599.88
                            },
                            "recent": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "example": "pay_789"
                                        },
                                        "userId": {
                                            "type": "string",
                                            "example": "usr_456"
                                        },
                                        "amount": {
                                            "type": "number",
                                            "format": "float",
                                            "example": 49.99
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "AdminRevenueReportResponse": {
                "type": "object",
                "properties": {
                    "report": {
                        "$ref": "#/components/schemas/AdminRevenueReport"
                    }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "error": {
                        "type": "string"
                    },
                    "details": {
                        "type": "object",
                        "additionalProperties": true
                    }
                }
            },
            "FavoriteType": {
                "type": "string",
                "enum": [
                    "PROGRAM",
                    "POSE",
                    "CLASS"
                ]
            },
            "Favorite": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "itemId": {
                        "type": "string"
                    },
                    "itemType": {
                        "$ref": "#/components/schemas/FavoriteType"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "item": {
                        "type": "object",
                        "description": "The favorited item details (Program, Pose, or Class)"
                    }
                }
            },
            "NotificationPreference": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "emailEnabled": {
                        "type": "boolean",
                        "description": "Enable/disable email notifications"
                    },
                    "smsEnabled": {
                        "type": "boolean",
                        "description": "Enable/disable SMS notifications"
                    },
                    "pushEnabled": {
                        "type": "boolean",
                        "description": "Enable/disable push notifications"
                    },
                    "inAppEnabled": {
                        "type": "boolean",
                        "description": "Enable/disable in-app notifications"
                    },
                    "marketingEmails": {
                        "type": "boolean",
                        "description": "Receive marketing emails"
                    },
                    "marketingSms": {
                        "type": "boolean",
                        "description": "Receive marketing SMS"
                    },
                    "challengeReminders": {
                        "type": "boolean",
                        "description": "Receive challenge reminders"
                    },
                    "challengeUpdates": {
                        "type": "boolean",
                        "description": "Receive challenge updates"
                    },
                    "sessionReminders": {
                        "type": "boolean",
                        "description": "Receive session reminders"
                    },
                    "weeklyProgress": {
                        "type": "boolean",
                        "description": "Receive weekly progress reports"
                    },
                    "newProgramAlerts": {
                        "type": "boolean",
                        "description": "Receive new program alerts"
                    },
                    "communityUpdates": {
                        "type": "boolean",
                        "description": "Receive community updates"
                    },
                    "paymentAlerts": {
                        "type": "boolean",
                        "description": "Receive payment alerts"
                    },
                    "securityAlerts": {
                        "type": "boolean",
                        "description": "Receive security alerts (always enabled)"
                    },
                    "quietHoursEnabled": {
                        "type": "boolean",
                        "description": "Enable quiet hours"
                    },
                    "quietHoursStart": {
                        "type": "string",
                        "nullable": true,
                        "example": "22:00",
                        "description": "Quiet hours start time (HH:mm)"
                    },
                    "quietHoursEnd": {
                        "type": "string",
                        "nullable": true,
                        "example": "08:00",
                        "description": "Quiet hours end time (HH:mm)"
                    },
                    "timezone": {
                        "type": "string",
                        "example": "Europe/Istanbul",
                        "description": "User timezone for quiet hours"
                    },
                    "currentlyInQuietHours": {
                        "type": "boolean",
                        "description": "Whether user is currently in quiet hours"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "UpdatePreferencesRequest": {
                "type": "object",
                "properties": {
                    "emailEnabled": {
                        "type": "boolean"
                    },
                    "smsEnabled": {
                        "type": "boolean"
                    },
                    "pushEnabled": {
                        "type": "boolean"
                    },
                    "inAppEnabled": {
                        "type": "boolean"
                    },
                    "marketingEmails": {
                        "type": "boolean"
                    },
                    "marketingSms": {
                        "type": "boolean"
                    },
                    "challengeReminders": {
                        "type": "boolean"
                    },
                    "challengeUpdates": {
                        "type": "boolean"
                    },
                    "sessionReminders": {
                        "type": "boolean"
                    },
                    "weeklyProgress": {
                        "type": "boolean"
                    },
                    "newProgramAlerts": {
                        "type": "boolean"
                    },
                    "communityUpdates": {
                        "type": "boolean"
                    },
                    "paymentAlerts": {
                        "type": "boolean"
                    },
                    "quietHoursEnabled": {
                        "type": "boolean"
                    },
                    "quietHoursStart": {
                        "type": "string",
                        "nullable": true,
                        "example": "22:00"
                    },
                    "quietHoursEnd": {
                        "type": "string",
                        "nullable": true,
                        "example": "08:00"
                    },
                    "timezone": {
                        "type": "string",
                        "example": "Europe/Istanbul"
                    }
                }
            },
            "PreferenceOption": {
                "type": "object",
                "properties": {
                    "key": {
                        "type": "string"
                    },
                    "label": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "category": {
                        "type": "string",
                        "enum": [
                            "channel",
                            "marketing",
                            "updates",
                            "reminders",
                            "quiet_hours"
                        ]
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "boolean",
                            "time",
                            "timezone"
                        ]
                    },
                    "editable": {
                        "type": "boolean"
                    }
                }
            },
            "DeviceToken": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "platform": {
                        "type": "string",
                        "enum": [
                            "IOS",
                            "ANDROID",
                            "WEB"
                        ]
                    },
                    "deviceName": {
                        "type": "string",
                        "nullable": true
                    },
                    "isActive": {
                        "type": "boolean"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "OtpPurpose": {
                "type": "string",
                "enum": [
                    "PHONE_VERIFY",
                    "LOGIN",
                    "PASSWORD_RESET"
                ]
            },
            "OtpResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "VideoProgress": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "lessonId": {
                        "type": "string"
                    },
                    "lessonType": {
                        "type": "string",
                        "enum": [
                            "PROGRAM_SESSION",
                            "CLASS"
                        ]
                    },
                    "currentTime": {
                        "type": "integer",
                        "description": "Current position in seconds"
                    },
                    "duration": {
                        "type": "integer",
                        "description": "Total duration in seconds"
                    },
                    "percentage": {
                        "type": "number",
                        "description": "Completion percentage (0-100)"
                    },
                    "completed": {
                        "type": "boolean"
                    },
                    "lastWatchedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            }
        }
    },
    "paths": {
        "/api/admin/users": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List all users",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "A list of users.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "users": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/User"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Admin role required."
                    }
                }
            }
        },
        "/api/admin/users/{id}/role": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update a user's role",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "role"
                                ],
                                "properties": {
                                    "role": {
                                        "type": "string",
                                        "enum": [
                                            "ADMIN",
                                            "TEACHER",
                                            "STUDENT"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Role updated successfully."
                    },
                    "404": {
                        "description": "User not found."
                    }
                }
            }
        },
        "/api/admin/challenges": {
            "get": {
                "tags": [
                    "Admin Challenges"
                ],
                "summary": "List challenges for administration",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of challenges."
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin Challenges"
                ],
                "summary": "Create a new challenge",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChallengeCreateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Challenge created."
                    }
                }
            }
        },
        "/api/admin/challenges/{challengeId}": {
            "put": {
                "tags": [
                    "Admin Challenges"
                ],
                "summary": "Update a challenge",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChallengeUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Challenge updated."
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin Challenges"
                ],
                "summary": "Delete a challenge",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Challenge deleted."
                    }
                }
            },
            "get": {
                "tags": [
                    "Admin Challenges"
                ],
                "summary": "Get challenge details (admin)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Challenge detail including user progress if authenticated."
                    }
                }
            }
        },
        "/api/admin/communication/templates": {
            "get": {
                "summary": "List message templates",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "channel",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "EMAIL",
                                "PUSH",
                                "SMS",
                                "IN_APP"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "category",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "isActive",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Templates list"
                    }
                }
            },
            "post": {
                "summary": "Create message template",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "slug",
                                    "channel",
                                    "category"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "slug": {
                                        "type": "string"
                                    },
                                    "subject": {
                                        "type": "string"
                                    },
                                    "bodyHtml": {
                                        "type": "string"
                                    },
                                    "bodyText": {
                                        "type": "string"
                                    },
                                    "bodyPush": {
                                        "type": "string"
                                    },
                                    "bodySms": {
                                        "type": "string"
                                    },
                                    "channel": {
                                        "type": "string"
                                    },
                                    "category": {
                                        "type": "string"
                                    },
                                    "variables": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Template created"
                    }
                }
            }
        },
        "/api/admin/communication/templates/{id}": {
            "get": {
                "summary": "Get template by ID",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Template details"
                    }
                }
            },
            "put": {
                "summary": "Update message template",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Template updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete message template",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Template deleted"
                    }
                }
            }
        },
        "/api/admin/communication/templates/{id}/test": {
            "post": {
                "summary": "Test message template",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "testEmail": {
                                        "type": "string"
                                    },
                                    "testUserId": {
                                        "type": "string"
                                    },
                                    "variables": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Test result"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns": {
            "get": {
                "summary": "List campaigns",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "channel",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaigns list"
                    }
                }
            },
            "post": {
                "summary": "Create campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "templateId",
                                    "channel"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "templateId": {
                                        "type": "string"
                                    },
                                    "targetAudience": {
                                        "type": "object"
                                    },
                                    "channel": {
                                        "type": "string"
                                    },
                                    "scheduledAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Campaign created"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}": {
            "get": {
                "summary": "Get campaign by ID",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign details"
                    }
                }
            },
            "put": {
                "summary": "Update campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign deleted"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/schedule": {
            "post": {
                "summary": "Schedule campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "scheduledAt"
                                ],
                                "properties": {
                                    "scheduledAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Campaign scheduled"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/execute": {
            "post": {
                "summary": "Execute campaign immediately",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign executed"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/pause": {
            "post": {
                "summary": "Pause campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign paused"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/resume": {
            "post": {
                "summary": "Resume campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign resumed"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/cancel": {
            "post": {
                "summary": "Cancel campaign",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign cancelled"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/{id}/stats": {
            "get": {
                "summary": "Get campaign statistics",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Campaign statistics"
                    }
                }
            }
        },
        "/api/admin/communication/campaigns/audience/preview": {
            "post": {
                "summary": "Preview target audience",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "subscriptionStatus": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "subscriptionTier": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "lastActiveFrom": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "lastActiveTo": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "engagementScoreMin": {
                                        "type": "integer"
                                    },
                                    "engagementScoreMax": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Audience preview"
                    }
                }
            }
        },
        "/api/admin/communication/scheduled": {
            "get": {
                "summary": "List scheduled messages",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Scheduled messages list"
                    }
                }
            }
        },
        "/api/admin/communication/scheduled/{id}": {
            "delete": {
                "summary": "Cancel scheduled message",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Message cancelled"
                    }
                }
            }
        },
        "/api/admin/communication/stats": {
            "get": {
                "summary": "Get communication statistics",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Communication statistics"
                    }
                }
            }
        },
        "/api/admin/communication/stats/daily": {
            "get": {
                "summary": "Get daily statistics",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "days",
                        "schema": {
                            "type": "integer",
                            "default": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Daily statistics"
                    }
                }
            }
        },
        "/api/admin/communication/stats/by-template": {
            "get": {
                "summary": "Get statistics by template",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statistics by template"
                    }
                }
            }
        },
        "/api/admin/communication/stats/by-channel": {
            "get": {
                "summary": "Get statistics by channel",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statistics by channel"
                    }
                }
            }
        },
        "/api/admin/communication/jobs/{jobName}/trigger": {
            "post": {
                "summary": "Manually trigger a job",
                "tags": [
                    "Admin Communication"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "jobName",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "scheduled_messages",
                                "weekly_digests",
                                "monthly_digests",
                                "inactive_users",
                                "campaigns"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Job triggered"
                    }
                }
            }
        },
        "/api/admin/live-streams": {
            "get": {
                "summary": "Get all streams",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "SCHEDULED",
                                "LIVE",
                                "ENDED",
                                "CANCELLED"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "type",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of all streams"
                    }
                }
            }
        },
        "/api/admin/live-streams/analytics": {
            "get": {
                "summary": "Get stream analytics",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream analytics"
                    }
                }
            }
        },
        "/api/admin/live-streams/analytics/daily": {
            "get": {
                "summary": "Get daily stream stats",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "days",
                        "schema": {
                            "type": "integer",
                            "default": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Daily stream statistics"
                    }
                }
            }
        },
        "/api/admin/live-streams/schedules": {
            "get": {
                "summary": "Get all schedules",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of all schedules"
                    }
                }
            }
        },
        "/api/admin/live-streams/schedules/{scheduleId}/toggle": {
            "post": {
                "summary": "Toggle schedule active status",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scheduleId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Schedule status toggled"
                    }
                }
            }
        },
        "/api/admin/live-streams/{id}": {
            "get": {
                "summary": "Get stream details",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream details"
                    }
                }
            }
        },
        "/api/admin/live-streams/{id}/end": {
            "post": {
                "summary": "Force end stream",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stream ended"
                    }
                }
            }
        },
        "/api/admin/live-streams/{id}/settings": {
            "put": {
                "summary": "Update stream settings",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "chatEnabled": {
                                        "type": "boolean"
                                    },
                                    "handRaiseEnabled": {
                                        "type": "boolean"
                                    },
                                    "maxParticipants": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Settings updated"
                    }
                }
            }
        },
        "/api/admin/live-streams/{id}/chat/{messageId}": {
            "delete": {
                "summary": "Moderate chat (delete message)",
                "tags": [
                    "Admin Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "messageId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Message deleted"
                    }
                }
            }
        },
        "/api/admin/podcasts": {
            "get": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "List all podcasts (admin sees all, teacher sees own)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "DRAFT",
                                "PUBLISHED",
                                "ARCHIVED"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Podcasts list"
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Create a new podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePodcast"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Podcast created"
                    }
                }
            }
        },
        "/api/admin/podcasts/{podcastId}": {
            "get": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Get podcast details",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Podcast details"
                    }
                }
            },
            "patch": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Update a podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePodcast"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Podcast updated"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Delete a podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Podcast deleted"
                    }
                }
            }
        },
        "/api/admin/podcasts/{podcastId}/episodes": {
            "get": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "List episodes for a podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Episodes list"
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Create a new episode",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateEpisode"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Episode created"
                    }
                }
            }
        },
        "/api/admin/podcasts/episodes/{episodeId}": {
            "get": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Get episode details",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Episode details"
                    }
                }
            },
            "patch": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Update an episode",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateEpisode"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Episode updated"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Delete an episode",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Episode deleted"
                    }
                }
            }
        },
        "/api/admin/podcasts/{podcastId}/analytics": {
            "get": {
                "tags": [
                    "Admin - Podcasts"
                ],
                "summary": "Get podcast analytics",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "days",
                        "schema": {
                            "type": "integer",
                            "default": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Podcast analytics data"
                    }
                }
            }
        },
        "/api/admin/poses": {
            "get": {
                "tags": [
                    "Admin Poses"
                ],
                "summary": "List poses (admin view)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of poses."
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin Poses"
                ],
                "summary": "Create a pose",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PoseUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Pose created."
                    }
                }
            }
        },
        "/api/admin/poses/{poseId}": {
            "get": {
                "tags": [
                    "Admin Poses"
                ],
                "summary": "Get pose detail (admin)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "poseId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pose detail."
                    }
                }
            },
            "put": {
                "tags": [
                    "Admin Poses"
                ],
                "summary": "Update a pose",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "poseId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PoseUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pose updated."
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin Poses"
                ],
                "summary": "Delete a pose",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "poseId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Pose deleted."
                    }
                }
            }
        },
        "/api/admin/programs": {
            "get": {
                "tags": [
                    "Admin Programs"
                ],
                "summary": "Admin list programs",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of programs for administration.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "programs": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProgramSummary"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin Programs"
                ],
                "summary": "Create a new program",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProgramUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Program created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "program": {
                                            "$ref": "#/components/schemas/ProgramSummary"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/programs/{programId}": {
            "get": {
                "tags": [
                    "Admin Programs"
                ],
                "summary": "Get program details (admin)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Program detail",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "program": {
                                            "$ref": "#/components/schemas/ProgramDetail"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Admin Programs"
                ],
                "summary": "Update a program",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProgramUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Program updated"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin Programs"
                ],
                "summary": "Delete a program",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Program deleted"
                    }
                }
            }
        },
        "/api/admin/programs/{programId}/sessions": {
            "get": {
                "tags": [
                    "Admin Program Sessions"
                ],
                "summary": "List sessions for a program",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sessions belonging to the program"
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin Program Sessions"
                ],
                "summary": "Create a session for a program",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProgramSessionUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Session created"
                    }
                }
            }
        },
        "/api/admin/programs/{programId}/sessions/{sessionId}": {
            "put": {
                "tags": [
                    "Admin Program Sessions"
                ],
                "summary": "Update a program session",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "sessionId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProgramSessionUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Session updated"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Admin Program Sessions"
                ],
                "summary": "Delete a program session",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "programId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "sessionId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Session deleted"
                    }
                }
            }
        },
        "/api/admin/reports/usage": {
            "get": {
                "tags": [
                    "Admin Reports"
                ],
                "summary": "Get high-level platform usage metrics",
                "description": "Returns user activity, streak distribution (based on confirmed bookings), and the most popular challenges.\nWhen running against the bundled seed data, the response mirrors typical demo dashboards.\n\nExample curl:\n```bash\ncurl -X GET \\\\\n  -H \"Authorization: Bearer <token>\" \\\\\n  http://localhost:3000/api/admin/reports/usage\n```\n",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usage report generated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AdminUsageReportResponse"
                                },
                                "examples": {
                                    "demo": {
                                        "summary": "Demo seed response",
                                        "value": {
                                            "report": {
                                                "generatedAt": "2024-07-01T12:00:00.000Z",
                                                "totalUsers": 1280,
                                                "activeUsersLast7d": 312,
                                                "streakDistribution": [
                                                    {
                                                        "length": 1,
                                                        "count": 420
                                                    },
                                                    {
                                                        "length": 3,
                                                        "count": 158
                                                    },
                                                    {
                                                        "length": 7,
                                                        "count": 36
                                                    }
                                                ],
                                                "topChallenges": [
                                                    {
                                                        "id": "chlg_seed_1",
                                                        "title": "Spring Detox Challenge",
                                                        "enrollmentCount": 87
                                                    },
                                                    {
                                                        "id": "chlg_seed_2",
                                                        "title": "Mindful Morning Reset",
                                                        "enrollmentCount": 76
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Admin role required."
                    }
                }
            }
        },
        "/api/admin/reports/revenue": {
            "get": {
                "tags": [
                    "Admin Reports"
                ],
                "summary": "Get revenue and subscription insights",
                "description": "Aggregates subscription payments to surface key revenue metrics (MRR/ARR),\nactive subscription counts, and recent failed payments. Seeded data showcases\na representative demo snapshot.\n\nExample curl:\n```bash\ncurl -X GET \\\\\n  -H \"Authorization: Bearer <token>\" \\\\\n  http://localhost:3000/api/admin/reports/revenue\n```\n",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Revenue report generated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AdminRevenueReportResponse"
                                },
                                "examples": {
                                    "demo": {
                                        "summary": "Demo seed response",
                                        "value": {
                                            "report": {
                                                "generatedAt": "2024-07-01T12:00:00.000Z",
                                                "mrr": 4280.5,
                                                "arr": 51366,
                                                "activeSubscriptions": 640,
                                                "failedPayments": {
                                                    "countLast30d": 12,
                                                    "totalAmountLast30d": 599.88,
                                                    "recent": [
                                                        {
                                                            "id": "pay_seed_1",
                                                            "userId": "usr_seed_42",
                                                            "amount": 49.99,
                                                            "createdAt": "2024-06-28T09:20:00.000Z"
                                                        },
                                                        {
                                                            "id": "pay_seed_2",
                                                            "userId": "usr_seed_51",
                                                            "amount": 49.99,
                                                            "createdAt": "2024-06-26T16:45:00.000Z"
                                                        }
                                                    ]
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Admin role required."
                    }
                }
            }
        },
        "/api/admin/webhooks/stats": {
            "get": {
                "summary": "Get webhook system statistics",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Webhook statistics"
                    }
                }
            }
        },
        "/api/admin/webhooks/processor/status": {
            "get": {
                "summary": "Get processor status",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Processor status"
                    }
                }
            }
        },
        "/api/admin/webhooks/processor/trigger": {
            "post": {
                "summary": "Manually trigger queue processing",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Processing triggered"
                    }
                }
            }
        },
        "/api/admin/webhooks/processor/retry": {
            "post": {
                "summary": "Manually trigger retry processing",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retry processing triggered"
                    }
                }
            }
        },
        "/api/admin/webhooks/endpoints": {
            "get": {
                "summary": "List all webhook endpoints (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "userId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "isActive",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of endpoints"
                    }
                }
            }
        },
        "/api/admin/webhooks/endpoints/{endpointId}": {
            "get": {
                "summary": "Get a specific endpoint (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint details"
                    }
                }
            },
            "delete": {
                "summary": "Delete an endpoint (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint deleted"
                    }
                }
            }
        },
        "/api/admin/webhooks/endpoints/{endpointId}/enable": {
            "post": {
                "summary": "Force enable an endpoint (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint enabled"
                    }
                }
            }
        },
        "/api/admin/webhooks/endpoints/{endpointId}/disable": {
            "post": {
                "summary": "Force disable an endpoint (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint disabled"
                    }
                }
            }
        },
        "/api/admin/webhooks/deliveries": {
            "get": {
                "summary": "List all deliveries (admin)",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PENDING",
                                "SENDING",
                                "DELIVERED",
                                "FAILED"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "event",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endpointId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "userId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of deliveries"
                    }
                }
            }
        },
        "/api/admin/webhooks/deliveries/purge": {
            "post": {
                "summary": "Purge old deliveries",
                "tags": [
                    "Admin - Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "daysOld": {
                                        "type": "integer",
                                        "default": 30
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Deliveries purged"
                    }
                }
            }
        },
        "/api/analytics/dashboard": {
            "get": {
                "summary": "Get dashboard metrics",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dashboard metrics retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/mrr": {
            "get": {
                "summary": "Get MRR and ARR",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "MRR and ARR retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/churn": {
            "get": {
                "summary": "Get churn rate",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Churn rate retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/ltv": {
            "get": {
                "summary": "Get LTV metrics",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "LTV metrics retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/revenue/by-provider": {
            "get": {
                "summary": "Get revenue breakdown by provider",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Revenue by provider retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/subscriptions/by-tier": {
            "get": {
                "summary": "Get subscription breakdown by tier",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscriptions by tier retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/revenue/over-time": {
            "get": {
                "summary": "Get revenue over time",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "groupBy",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "day",
                                "week",
                                "month"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Revenue over time retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/users": {
            "get": {
                "summary": "Get user metrics",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User metrics retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/subscriptions": {
            "get": {
                "summary": "Get subscription metrics",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription metrics retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/revenue-records": {
            "get": {
                "summary": "Get revenue records",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "type",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "provider",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "tier",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Revenue records retrieved successfully"
                    }
                }
            },
            "post": {
                "summary": "Record a revenue event",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "type",
                                    "amount"
                                ],
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "subscriptionId": {
                                        "type": "string"
                                    },
                                    "paymentId": {
                                        "type": "string"
                                    },
                                    "invoiceId": {
                                        "type": "string"
                                    },
                                    "type": {
                                        "type": "string"
                                    },
                                    "amount": {
                                        "type": "number"
                                    },
                                    "currency": {
                                        "type": "string"
                                    },
                                    "provider": {
                                        "type": "string"
                                    },
                                    "planId": {
                                        "type": "string"
                                    },
                                    "tier": {
                                        "type": "string"
                                    },
                                    "interval": {
                                        "type": "string"
                                    },
                                    "metadata": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Revenue recorded successfully"
                    }
                }
            }
        },
        "/api/analytics/snapshots": {
            "get": {
                "summary": "Get analytics snapshots",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Snapshots retrieved successfully"
                    }
                }
            },
            "post": {
                "summary": "Create analytics snapshot",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "date": {
                                        "type": "string",
                                        "format": "date"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Snapshot created successfully"
                    }
                }
            }
        },
        "/api/analytics/snapshots/latest": {
            "get": {
                "summary": "Get latest analytics snapshot",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Latest snapshot retrieved successfully"
                    }
                }
            }
        },
        "/api/analytics/reports/revenue": {
            "get": {
                "summary": "Generate revenue report",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "provider",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "format",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "excel",
                                "pdf"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "includeDetails",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Report generated successfully"
                    }
                }
            }
        },
        "/api/analytics/reports/subscriptions": {
            "get": {
                "summary": "Generate subscription report",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "tier",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "format",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "excel",
                                "pdf"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "includeDetails",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Report generated successfully"
                    }
                }
            }
        },
        "/api/analytics/reports/invoices": {
            "get": {
                "summary": "Generate invoice report",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "format",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "excel",
                                "pdf"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "includeDetails",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Report generated successfully"
                    }
                }
            }
        },
        "/api/analytics/reports/full": {
            "get": {
                "summary": "Generate full analytics report",
                "tags": [
                    "Analytics"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "format",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "excel",
                                "pdf"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "includeDetails",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Report generated successfully"
                    }
                }
            }
        },
        "/api/api-keys": {
            "post": {
                "summary": "Create a new API key",
                "tags": [
                    "API Keys"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "Friendly name for the API key",
                                        "example": "Mobile App Key"
                                    },
                                    "permissions": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "description": "List of permissions (format action:resource)",
                                        "example": [
                                            "read:programs",
                                            "write:progress"
                                        ]
                                    },
                                    "rateLimit": {
                                        "type": "integer",
                                        "description": "Requests per minute limit",
                                        "default": 60,
                                        "minimum": 1,
                                        "maximum": 1000
                                    },
                                    "expiresAt": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the key expires (optional)"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "API key created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "keyId": {
                                                    "type": "string"
                                                },
                                                "key": {
                                                    "type": "string",
                                                    "description": "Full API key (only shown once)"
                                                },
                                                "prefix": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "permissions": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "rateLimit": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            },
            "get": {
                "summary": "List all API keys for the authenticated user",
                "tags": [
                    "API Keys"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of API keys",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "prefix": {
                                                        "type": "string"
                                                    },
                                                    "permissions": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "rateLimit": {
                                                        "type": "integer"
                                                    },
                                                    "isActive": {
                                                        "type": "boolean"
                                                    },
                                                    "lastUsedAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "usageCount": {
                                                        "type": "integer"
                                                    },
                                                    "expiresAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                }
                                            }
                                        },
                                        "count": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/api-keys/{keyId}": {
            "delete": {
                "summary": "Revoke an API key",
                "tags": [
                    "API Keys"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "keyId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "ID of the API key to revoke"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key revoked successfully"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "API key not found"
                    }
                }
            }
        },
        "/api/api-keys/{keyId}/rotate": {
            "post": {
                "summary": "Rotate an API key (revoke old, create new with same settings)",
                "tags": [
                    "API Keys"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "keyId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "ID of the API key to rotate"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key rotated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "keyId": {
                                                    "type": "string"
                                                },
                                                "key": {
                                                    "type": "string",
                                                    "description": "New API key (only shown once)"
                                                },
                                                "prefix": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "API key not found"
                    }
                }
            }
        },
        "/api/api-keys/{keyId}/usage": {
            "get": {
                "summary": "Get usage statistics for an API key",
                "tags": [
                    "API Keys"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "keyId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "ID of the API key"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key usage statistics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "keyId": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "usageCount": {
                                                    "type": "integer"
                                                },
                                                "lastUsedAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "rateLimit": {
                                                    "type": "integer"
                                                },
                                                "isActive": {
                                                    "type": "boolean"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "API key not found"
                    }
                }
            }
        },
        "/api/auth/refresh": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Refresh access token",
                "description": "Exchange a valid refresh token for a new access token and optionally a new refresh token (if rotation is enabled)",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "refreshToken"
                                ],
                                "properties": {
                                    "refreshToken": {
                                        "type": "string",
                                        "description": "The refresh token"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "New tokens issued",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "accessToken": {
                                            "type": "string"
                                        },
                                        "refreshToken": {
                                            "type": "string"
                                        },
                                        "expiresIn": {
                                            "type": "number",
                                            "description": "Access token expiry in seconds"
                                        },
                                        "tokenType": {
                                            "type": "string",
                                            "example": "Bearer"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid or expired refresh token"
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Logout current session",
                "description": "Revoke the provided refresh token",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "refreshToken"
                                ],
                                "properties": {
                                    "refreshToken": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully logged out"
                    },
                    "400": {
                        "description": "Invalid or already revoked token"
                    }
                }
            }
        },
        "/api/auth/logout-all": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Logout from all devices",
                "description": "Revoke all refresh tokens for the authenticated user",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "confirmLogoutAll"
                                ],
                                "properties": {
                                    "confirmLogoutAll": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully logged out from all devices",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "sessionsRevoked": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/auth/sessions": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Get active sessions",
                "description": "List all active sessions for the authenticated user",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of active sessions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "sessions": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "string"
                                                    },
                                                    "userAgent": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "ipAddress": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "isCurrent": {
                                                        "type": "boolean"
                                                    }
                                                }
                                            }
                                        },
                                        "count": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/auth/sessions/{sessionId}": {
            "delete": {
                "tags": [
                    "Auth"
                ],
                "summary": "Revoke a specific session",
                "description": "Revoke a specific session by its ID (familyId)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "sessionId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The session ID to revoke"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session revoked successfully"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "404": {
                        "description": "Session not found or already revoked"
                    }
                }
            }
        },
        "/api/bookings": {
            "post": {
                "tags": [
                    "Bookings"
                ],
                "summary": "Create a booking for a class",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/BookingRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Booking created successfully."
                    },
                    "409": {
                        "description": "Duplicate booking detected."
                    }
                }
            }
        },
        "/api/bookings/me": {
            "get": {
                "tags": [
                    "Bookings"
                ],
                "summary": "List bookings for the authenticated user",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of bookings.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "bookings": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Booking"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/bookings/{id}/cancel": {
            "patch": {
                "tags": [
                    "Bookings"
                ],
                "summary": "Cancel a booking",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Booking cancelled successfully."
                    }
                }
            }
        },
        "/api/bookings/{id}": {
            "put": {
                "tags": [
                    "Bookings"
                ],
                "summary": "Update booking status",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "PENDING",
                                            "CONFIRMED",
                                            "CANCELLED"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Booking updated."
                    }
                }
            }
        },
        "/api/admin/cache/stats": {
            "get": {
                "summary": "Get cache statistics",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cache statistics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "hits": {
                                                    "type": "integer",
                                                    "description": "Number of cache hits"
                                                },
                                                "misses": {
                                                    "type": "integer",
                                                    "description": "Number of cache misses"
                                                },
                                                "keys": {
                                                    "type": "integer",
                                                    "description": "Total number of cached keys"
                                                },
                                                "memory": {
                                                    "type": "string",
                                                    "description": "Memory used by Redis"
                                                },
                                                "hitRate": {
                                                    "type": "string",
                                                    "description": "Cache hit rate percentage"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/cache/clear": {
            "delete": {
                "summary": "Clear cache by pattern",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "pattern",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Pattern to match cache keys (e.g., \"program:*\", \"user:123:*\")",
                        "example": "program:*"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cache cleared",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "pattern": {
                                                    "type": "string"
                                                },
                                                "deletedKeys": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid pattern"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/cache/clear-all": {
            "delete": {
                "summary": "Clear all application cache",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "All cache cleared",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/cache/flush": {
            "post": {
                "summary": "Flush entire Redis database (DANGEROUS)",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "confirm"
                                ],
                                "properties": {
                                    "confirm": {
                                        "type": "string",
                                        "description": "Must be \"FLUSH_ALL_DATA\" to confirm",
                                        "example": "FLUSH_ALL_DATA"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Database flushed"
                    },
                    "400": {
                        "description": "Confirmation required"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/cache/warm": {
            "post": {
                "summary": "Warm cache with frequently accessed data",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cache warming result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "warmed": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "errors": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "durationMs": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/cache/keys": {
            "get": {
                "summary": "List cache keys (for debugging)",
                "tags": [
                    "Cache"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "pattern",
                        "schema": {
                            "type": "string",
                            "default": "*"
                        },
                        "description": "Pattern to match keys"
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "maximum": 500
                        },
                        "description": "Maximum number of keys to return"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of cache keys",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "pattern": {
                                                    "type": "string"
                                                },
                                                "limit": {
                                                    "type": "integer"
                                                },
                                                "count": {
                                                    "type": "integer"
                                                },
                                                "keys": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/challenges": {
            "get": {
                "tags": [
                    "Challenges"
                ],
                "summary": "List available challenges",
                "responses": {
                    "200": {
                        "description": "A list of challenges with enrollment counts.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "challenges": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ChallengeSummary"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/challenges/{challengeId}": {
            "get": {
                "tags": [
                    "Challenges"
                ],
                "summary": "Get challenge details",
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Challenge details and user progress if authenticated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "challenge": {
                                            "$ref": "#/components/schemas/ChallengeDetail"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Challenge not found."
                    }
                }
            }
        },
        "/api/challenges/{challengeId}/join": {
            "post": {
                "tags": [
                    "Challenges"
                ],
                "summary": "Join a challenge",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Challenge joined successfully."
                    },
                    "404": {
                        "description": "Challenge not found."
                    },
                    "409": {
                        "description": "User already joined the challenge."
                    }
                }
            }
        },
        "/api/challenges/{challengeId}/check": {
            "post": {
                "tags": [
                    "Challenges"
                ],
                "summary": "Log daily completion for a challenge",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "challengeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChallengeCheckRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Daily completion recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "check": {
                                            "$ref": "#/components/schemas/DailyCheck"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User must join challenge before logging progress."
                    },
                    "404": {
                        "description": "Challenge or session not found."
                    }
                }
            }
        },
        "/api/classes": {
            "get": {
                "tags": [
                    "Classes"
                ],
                "summary": "List available classes",
                "responses": {
                    "200": {
                        "description": "A list of yoga classes.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "classes": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Class"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Classes"
                ],
                "summary": "Create a new class",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ClassCreateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Class created successfully."
                    },
                    "400": {
                        "description": "Validation error."
                    }
                }
            }
        },
        "/api/classes/{id}": {
            "get": {
                "tags": [
                    "Classes"
                ],
                "summary": "Get class details",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Details for the requested class.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "class": {
                                            "$ref": "#/components/schemas/Class"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Class not found."
                    }
                }
            },
            "put": {
                "tags": [
                    "Classes"
                ],
                "summary": "Update an existing class",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ClassUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Class updated successfully."
                    },
                    "404": {
                        "description": "Class not found."
                    }
                }
            },
            "delete": {
                "tags": [
                    "Classes"
                ],
                "summary": "Delete a class",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Class deleted successfully."
                    }
                }
            }
        },
        "/api/classes/stats": {
            "get": {
                "tags": [
                    "Classes"
                ],
                "summary": "Get class statistics for admin dashboard",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Class statistics"
                    }
                }
            }
        },
        "/api/favorites": {
            "post": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Add item to favorites",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "itemId",
                                    "itemType"
                                ],
                                "properties": {
                                    "itemId": {
                                        "type": "string"
                                    },
                                    "itemType": {
                                        "$ref": "#/components/schemas/FavoriteType"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Added to favorites"
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "404": {
                        "description": "Item not found"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Remove item from favorites",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "itemId",
                                    "itemType"
                                ],
                                "properties": {
                                    "itemId": {
                                        "type": "string"
                                    },
                                    "itemType": {
                                        "$ref": "#/components/schemas/FavoriteType"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "Removed from favorites (or was not in favorites)"
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            },
            "get": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Get user's favorites",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "itemType",
                        "schema": {
                            "$ref": "#/components/schemas/FavoriteType"
                        },
                        "description": "Filter by type"
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of favorites",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "favorites": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Favorite"
                                            }
                                        },
                                        "pagination": {
                                            "type": "object",
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "limit": {
                                                    "type": "integer"
                                                },
                                                "totalPages": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/favorites/toggle": {
            "post": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Toggle favorite status",
                "description": "If favorited, removes. If not favorited, adds.",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "itemId",
                                    "itemType"
                                ],
                                "properties": {
                                    "itemId": {
                                        "type": "string"
                                    },
                                    "itemType": {
                                        "$ref": "#/components/schemas/FavoriteType"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Favorite toggled",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "isFavorite": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "favorite": {
                                            "$ref": "#/components/schemas/Favorite"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "404": {
                        "description": "Item not found"
                    }
                }
            }
        },
        "/api/favorites/counts": {
            "get": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Get favorite counts by type",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Favorite counts",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "counts": {
                                            "type": "object",
                                            "properties": {
                                                "programs": {
                                                    "type": "integer"
                                                },
                                                "poses": {
                                                    "type": "integer"
                                                },
                                                "classes": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/favorites/check/{itemType}/{itemId}": {
            "get": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Check if item is favorited",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "itemType",
                        "required": true,
                        "schema": {
                            "$ref": "#/components/schemas/FavoriteType"
                        }
                    },
                    {
                        "in": "path",
                        "name": "itemId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Favorite status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "isFavorite": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/favorites/check-bulk": {
            "post": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Bulk check favorite status for multiple items",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "items"
                                ],
                                "properties": {
                                    "items": {
                                        "type": "array",
                                        "maxItems": 100,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "itemId",
                                                "itemType"
                                            ],
                                            "properties": {
                                                "itemId": {
                                                    "type": "string"
                                                },
                                                "itemType": {
                                                    "$ref": "#/components/schemas/FavoriteType"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Favorite status for each item",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "favorites": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "itemId": {
                                                        "type": "string"
                                                    },
                                                    "itemType": {
                                                        "type": "string"
                                                    },
                                                    "isFavorite": {
                                                        "type": "boolean"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/favorites/type/{itemType}": {
            "get": {
                "tags": [
                    "Favorites"
                ],
                "summary": "Get favorites by type",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "itemType",
                        "required": true,
                        "schema": {
                            "$ref": "#/components/schemas/FavoriteType"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of favorites by type"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "description": "Returns the current health status of the API.",
                "responses": {
                    "200": {
                        "description": "API is operating normally.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HealthResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices": {
            "get": {
                "summary": "Get user's invoices",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "DRAFT",
                                "OPEN",
                                "PAID",
                                "VOID",
                                "UNCOLLECTIBLE"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User's invoices"
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}": {
            "get": {
                "summary": "Get single invoice",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Invoice details"
                    },
                    "404": {
                        "description": "Invoice not found"
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/pdf": {
            "get": {
                "summary": "Get invoice PDF URL",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PDF URL"
                    },
                    "404": {
                        "description": "Invoice or PDF not found"
                    }
                }
            }
        },
        "/api/invoices/admin/all": {
            "get": {
                "summary": "Get all invoices (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "userId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "All invoices"
                    }
                }
            }
        },
        "/api/invoices/admin/stats": {
            "get": {
                "summary": "Get invoice statistics (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Invoice statistics"
                    }
                }
            }
        },
        "/api/invoices/admin/{invoiceId}": {
            "get": {
                "summary": "Get invoice by ID (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Invoice details"
                    },
                    "404": {
                        "description": "Invoice not found"
                    }
                }
            }
        },
        "/api/invoices/admin/{invoiceId}/pdf": {
            "get": {
                "summary": "Get invoice PDF URL (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PDF URL"
                    }
                }
            }
        },
        "/api/invoices/admin/{invoiceId}/void": {
            "post": {
                "summary": "Void an invoice (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice voided"
                    },
                    "400": {
                        "description": "Cannot void this invoice"
                    },
                    "404": {
                        "description": "Invoice not found"
                    }
                }
            }
        },
        "/api/invoices/admin/{invoiceId}/mark-paid": {
            "post": {
                "summary": "Mark invoice as paid (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "amountPaid": {
                                        "type": "number"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice marked as paid"
                    },
                    "404": {
                        "description": "Invoice not found"
                    }
                }
            }
        },
        "/api/invoices/admin/create": {
            "post": {
                "summary": "Create detailed invoice (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "userId",
                                    "items"
                                ],
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "subscriptionId": {
                                        "type": "string"
                                    },
                                    "paymentId": {
                                        "type": "string"
                                    },
                                    "invoiceType": {
                                        "type": "string",
                                        "enum": [
                                            "SUBSCRIPTION",
                                            "ONE_TIME",
                                            "REFUND",
                                            "CREDIT"
                                        ]
                                    },
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "description": {
                                                    "type": "string"
                                                },
                                                "quantity": {
                                                    "type": "number"
                                                },
                                                "unitPrice": {
                                                    "type": "number"
                                                }
                                            }
                                        }
                                    },
                                    "currency": {
                                        "type": "string"
                                    },
                                    "taxRate": {
                                        "type": "number"
                                    },
                                    "discountAmount": {
                                        "type": "number"
                                    },
                                    "billingName": {
                                        "type": "string"
                                    },
                                    "billingEmail": {
                                        "type": "string"
                                    },
                                    "billingAddress": {
                                        "type": "string"
                                    },
                                    "billingCity": {
                                        "type": "string"
                                    },
                                    "billingCountry": {
                                        "type": "string"
                                    },
                                    "billingZip": {
                                        "type": "string"
                                    },
                                    "taxId": {
                                        "type": "string"
                                    },
                                    "notes": {
                                        "type": "string"
                                    },
                                    "dueDate": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "periodStart": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "periodEnd": {
                                        "type": "string",
                                        "format": "date"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Invoice created"
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/download": {
            "get": {
                "summary": "Download invoice PDF",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "invoiceId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PDF file",
                        "content": {
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Invoice not found"
                    }
                }
            }
        },
        "/api/invoices/tax-rates": {
            "get": {
                "summary": "List all tax rates",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tax rates list"
                    }
                }
            }
        },
        "/api/invoices/tax-rates/by-country": {
            "get": {
                "summary": "Get tax rate by country",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "country",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "state",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tax rate for country"
                    }
                }
            }
        },
        "/api/invoices/admin/tax-rates": {
            "post": {
                "summary": "Create tax rate (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "country",
                                    "rate"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "country": {
                                        "type": "string"
                                    },
                                    "state": {
                                        "type": "string"
                                    },
                                    "rate": {
                                        "type": "number"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "isDefault": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Tax rate created"
                    }
                }
            }
        },
        "/api/invoices/admin/tax-rates/{id}": {
            "put": {
                "summary": "Update tax rate (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "rate": {
                                        "type": "number"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    },
                                    "isDefault": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tax rate updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete tax rate (admin)",
                "tags": [
                    "Invoices"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tax rate deleted"
                    }
                }
            }
        },
        "/api/live-streams": {
            "get": {
                "summary": "Get upcoming streams",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "type",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "YOGA_CLASS",
                                "MEDITATION",
                                "Q_AND_A",
                                "WORKSHOP",
                                "SPECIAL_EVENT"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "level",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "BEGINNER",
                                "INTERMEDIATE",
                                "ADVANCED"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of upcoming streams"
                    }
                }
            },
            "post": {
                "summary": "Create a new stream (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateStreamInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Stream created"
                    }
                }
            }
        },
        "/api/live-streams/live": {
            "get": {
                "summary": "Get currently live streams",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of live streams"
                    }
                }
            }
        },
        "/api/live-streams/search": {
            "get": {
                "summary": "Search streams",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "q",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Search results"
                    }
                }
            }
        },
        "/api/live-streams/{id}": {
            "get": {
                "summary": "Get stream details",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream details"
                    }
                }
            },
            "put": {
                "summary": "Update stream (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateStreamInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stream updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete stream (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream deleted"
                    }
                }
            }
        },
        "/api/live-streams/{id}/token": {
            "get": {
                "summary": "Get stream token for joining",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream token data"
                    }
                }
            }
        },
        "/api/live-streams/my": {
            "get": {
                "summary": "Get my streams (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of instructor's streams"
                    }
                }
            }
        },
        "/api/live-streams/{id}/start": {
            "post": {
                "summary": "Start streaming (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream started"
                    }
                }
            }
        },
        "/api/live-streams/{id}/end": {
            "post": {
                "summary": "End streaming (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream ended"
                    }
                }
            }
        },
        "/api/live-streams/{id}/cancel": {
            "post": {
                "summary": "Cancel stream (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stream cancelled"
                    }
                }
            }
        },
        "/api/live-streams/{id}/join": {
            "post": {
                "summary": "Join stream",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "agoraUid": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Joined stream"
                    }
                }
            }
        },
        "/api/live-streams/{id}/leave": {
            "post": {
                "summary": "Leave stream",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Left stream"
                    }
                }
            }
        },
        "/api/live-streams/{id}/participants": {
            "get": {
                "summary": "Get stream participants",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of participants"
                    }
                }
            }
        },
        "/api/live-streams/{id}/hand/raise": {
            "post": {
                "summary": "Raise hand",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Hand raised"
                    }
                }
            }
        },
        "/api/live-streams/{id}/hand/lower": {
            "post": {
                "summary": "Lower hand",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Hand lowered"
                    }
                }
            }
        },
        "/api/live-streams/{id}/register": {
            "post": {
                "summary": "Register for stream",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Registered for stream"
                    }
                }
            },
            "delete": {
                "summary": "Unregister from stream",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Unregistered from stream"
                    }
                }
            }
        },
        "/api/live-streams/{id}/registrations": {
            "get": {
                "summary": "Get stream registrations",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of registrations"
                    }
                }
            }
        },
        "/api/live-streams/{id}/registration/check": {
            "get": {
                "summary": "Check registration status",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Registration status"
                    }
                }
            }
        },
        "/api/live-streams/{id}/chat": {
            "get": {
                "summary": "Get chat messages",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "since",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chat messages"
                    }
                }
            },
            "post": {
                "summary": "Send chat message",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatMessage"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Message sent"
                    }
                }
            }
        },
        "/api/live-streams/{id}/chat/{messageId}": {
            "delete": {
                "summary": "Delete chat message",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "messageId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Message deleted"
                    }
                }
            }
        },
        "/api/live-streams/{id}/chat/{messageId}/pin": {
            "post": {
                "summary": "Pin chat message",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "messageId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Message pinned"
                    }
                }
            }
        },
        "/api/live-streams/{id}/chat/pinned": {
            "get": {
                "summary": "Get pinned messages",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pinned messages"
                    }
                }
            }
        },
        "/api/live-streams/{id}/reactions": {
            "post": {
                "summary": "Add reaction",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "LIKE",
                                            "HEART",
                                            "CLAP",
                                            "NAMASTE",
                                            "FIRE"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reaction added"
                    }
                }
            },
            "get": {
                "summary": "Get reaction counts",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reaction counts"
                    }
                }
            }
        },
        "/api/live-streams/{id}/recording": {
            "get": {
                "summary": "Get stream recording",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Recording data"
                    }
                }
            }
        },
        "/api/live-streams/schedules": {
            "post": {
                "summary": "Create recurring schedule (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ScheduleInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Schedule created"
                    }
                }
            }
        },
        "/api/live-streams/schedules/my": {
            "get": {
                "summary": "Get my schedules (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of schedules"
                    }
                }
            }
        },
        "/api/live-streams/schedules/{scheduleId}": {
            "put": {
                "summary": "Update schedule (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scheduleId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Schedule updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete schedule (Instructor only)",
                "tags": [
                    "Live Streams"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scheduleId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Schedule deleted"
                    }
                }
            }
        },
        "/api/media/upload": {
            "post": {
                "tags": [
                    "Media"
                ],
                "summary": "Generate a presigned URL for file upload to S3",
                "description": "Returns a presigned URL that allows direct upload to S3. Only ADMIN and TEACHER roles can upload.",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "filename",
                                    "contentType"
                                ],
                                "properties": {
                                    "filename": {
                                        "type": "string",
                                        "example": "yoga-session-1.mp4"
                                    },
                                    "contentType": {
                                        "type": "string",
                                        "example": "video/mp4"
                                    },
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "video",
                                            "image",
                                            "thumbnail",
                                            "pose"
                                        ],
                                        "default": "video",
                                        "description": "Type of media being uploaded"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Upload URL generated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "upload": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "description": "Unique identifier for this upload"
                                                },
                                                "uploadUrl": {
                                                    "type": "string",
                                                    "description": "Presigned URL for direct S3 upload (PUT request)"
                                                },
                                                "fileUrl": {
                                                    "type": "string",
                                                    "description": "Public CDN URL after upload completes"
                                                },
                                                "expiresAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "When the upload URL expires"
                                                },
                                                "key": {
                                                    "type": "string",
                                                    "description": "S3 object key"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid content type or validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions (requires ADMIN or TEACHER role)"
                    }
                }
            }
        },
        "/api/media/{id}": {
            "get": {
                "tags": [
                    "Media"
                ],
                "summary": "Get public media URL",
                "description": "Returns the CDN URL for a media file. No authentication required for public media.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Media ID or S3 key"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Media URL retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "fileUrl": {
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid media ID"
                    }
                }
            }
        },
        "/api/media/{id}/signed": {
            "get": {
                "tags": [
                    "Media"
                ],
                "summary": "Get signed download URL for private media",
                "description": "Returns a time-limited signed URL for accessing private media files.",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Media ID or S3 key"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Signed URL generated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "signedUrl": {
                                            "type": "string",
                                            "description": "Time-limited signed URL for download"
                                        },
                                        "expiresIn": {
                                            "type": "number",
                                            "description": "Seconds until the signed URL expires"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid media ID"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/mobile/config": {
            "get": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Get app configuration",
                "description": "Returns app settings, feature flags, minimum version requirements",
                "responses": {
                    "200": {
                        "description": "App configuration"
                    }
                }
            }
        },
        "/api/mobile/home": {
            "get": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Get home screen data",
                "description": "Single endpoint for all home screen data (featured, continue watching, recommendations)",
                "responses": {
                    "200": {
                        "description": "Home screen data"
                    }
                }
            }
        },
        "/api/mobile/explore": {
            "get": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Get explore/discover screen data",
                "description": "Categories, trending content, popular instructors",
                "responses": {
                    "200": {
                        "description": "Explore screen data"
                    }
                }
            }
        },
        "/api/mobile/dashboard": {
            "get": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Get user dashboard data",
                "description": "User stats, progress, active challenges, upcoming sessions",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Dashboard data"
                    }
                }
            }
        },
        "/api/mobile/sync": {
            "post": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Sync user data",
                "description": "Sync offline progress, favorites, settings with server",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "lastSyncAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "offlineProgress": {
                                        "type": "array"
                                    },
                                    "offlineFavorites": {
                                        "type": "array"
                                    },
                                    "settings": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sync result with updated data"
                    }
                }
            }
        },
        "/api/mobile/batch": {
            "post": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Batch multiple API requests",
                "description": "Execute multiple API calls in a single request",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "requests": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "method": {
                                                    "type": "string",
                                                    "enum": [
                                                        "GET",
                                                        "POST",
                                                        "PUT",
                                                        "DELETE"
                                                    ]
                                                },
                                                "path": {
                                                    "type": "string"
                                                },
                                                "body": {
                                                    "type": "object"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Batch response with results for each request"
                    }
                }
            }
        },
        "/api/mobile/device": {
            "post": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Register device for push notifications",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "token",
                                    "platform"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    },
                                    "platform": {
                                        "type": "string",
                                        "enum": [
                                            "ios",
                                            "android"
                                        ]
                                    },
                                    "deviceName": {
                                        "type": "string"
                                    },
                                    "appVersion": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Device registered"
                    }
                }
            }
        },
        "/api/mobile/device/token": {
            "put": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Update device push token",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token updated"
                    }
                }
            }
        },
        "/api/mobile/events": {
            "post": {
                "tags": [
                    "Mobile"
                ],
                "summary": "Log app analytics events",
                "description": "Batch log multiple analytics events from mobile app",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "events": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "properties": {
                                                    "type": "object"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Events logged"
                    }
                }
            }
        },
        "/api/notifications/test": {
            "post": {
                "tags": [
                    "Push Notifications"
                ],
                "summary": "Send a test notification",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/NotificationTestRequest",
                                "type": "object",
                                "required": [
                                    "title",
                                    "body"
                                ],
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Test Notification"
                                    },
                                    "body": {
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "This is a test push notification"
                                    },
                                    "data": {
                                        "type": "object",
                                        "additionalProperties": {
                                            "type": "string"
                                        },
                                        "description": "Optional custom data payload"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Test notification sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "result": {
                                            "type": "object",
                                            "properties": {
                                                "success": {
                                                    "type": "boolean"
                                                },
                                                "successCount": {
                                                    "type": "integer"
                                                },
                                                "failureCount": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error or no registered devices"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "503": {
                        "description": "Push notifications not configured"
                    }
                },
                "description": "Send a test push notification to your own registered devices"
            }
        },
        "/api/notification-preferences": {
            "get": {
                "summary": "Get notification preferences",
                "description": "Get the authenticated user's notification preferences",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification preferences",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/NotificationPreference"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            },
            "put": {
                "summary": "Update notification preferences",
                "description": "Update the authenticated user's notification preferences",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePreferencesRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preferences updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/NotificationPreference"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/notification-preferences/reset": {
            "post": {
                "summary": "Reset preferences to defaults",
                "description": "Reset all notification preferences to default values",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Preferences reset successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/NotificationPreference"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/notification-preferences/options": {
            "get": {
                "summary": "Get available preference options",
                "description": "Get list of all available preference options with metadata (for UI)",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Available options",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "options": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/PreferenceOption"
                                                    }
                                                },
                                                "grouped": {
                                                    "type": "object",
                                                    "properties": {
                                                        "channels": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PreferenceOption"
                                                            }
                                                        },
                                                        "marketing": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PreferenceOption"
                                                            }
                                                        },
                                                        "updates": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PreferenceOption"
                                                            }
                                                        },
                                                        "reminders": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PreferenceOption"
                                                            }
                                                        },
                                                        "quietHours": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PreferenceOption"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notification-preferences/unsubscribe/{token}": {
            "get": {
                "summary": "Unsubscribe via email link",
                "description": "Process unsubscribe request from email link (public endpoint)",
                "tags": [
                    "NotificationPreferences"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "token",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Unsubscribe token from email"
                    },
                    {
                        "in": "query",
                        "name": "type",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "MARKETING",
                                "CHALLENGE_REMINDER",
                                "CHALLENGE_UPDATE",
                                "SESSION_REMINDER",
                                "WEEKLY_PROGRESS",
                                "NEW_PROGRAM",
                                "COMMUNITY",
                                "PAYMENT"
                            ]
                        },
                        "description": "Specific notification type to unsubscribe from"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Unsubscribed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid or expired token"
                    }
                }
            }
        },
        "/api/notification-preferences/resubscribe": {
            "post": {
                "summary": "Resubscribe to notification type",
                "description": "Resubscribe to a previously unsubscribed notification type",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "MARKETING",
                                            "CHALLENGE_REMINDER",
                                            "CHALLENGE_UPDATE",
                                            "SESSION_REMINDER",
                                            "WEEKLY_PROGRESS",
                                            "NEW_PROGRAM",
                                            "COMMUNITY",
                                            "PAYMENT"
                                        ],
                                        "description": "Notification type to resubscribe to"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Resubscribed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/notification-preferences/quiet-hours/status": {
            "get": {
                "summary": "Get quiet hours status",
                "description": "Check if user is currently in quiet hours",
                "tags": [
                    "NotificationPreferences"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quiet hours status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "quietHoursEnabled": {
                                                    "type": "boolean"
                                                },
                                                "quietHoursStart": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "quietHoursEnd": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "timezone": {
                                                    "type": "string"
                                                },
                                                "currentlyInQuietHours": {
                                                    "type": "boolean"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/api/offline/sync": {
            "post": {
                "tags": [
                    "Offline"
                ],
                "summary": "Sync offline data",
                "description": "Process offline actions and get server changes",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "lastSyncAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "offlineActions": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "enum": [
                                                        "progress",
                                                        "favorite",
                                                        "bookmark",
                                                        "rating",
                                                        "note"
                                                    ]
                                                },
                                                "action": {
                                                    "type": "string",
                                                    "enum": [
                                                        "create",
                                                        "update",
                                                        "delete"
                                                    ]
                                                },
                                                "entityType": {
                                                    "type": "string"
                                                },
                                                "entityId": {
                                                    "type": "string"
                                                },
                                                "data": {
                                                    "type": "object"
                                                },
                                                "timestamp": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "clientId": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "deviceId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sync result"
                    }
                }
            }
        },
        "/api/offline/delta": {
            "get": {
                "tags": [
                    "Offline"
                ],
                "summary": "Get delta updates",
                "description": "Get incremental updates since last sync version",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "version",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Last sync version"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delta updates"
                    }
                }
            }
        },
        "/api/offline/content": {
            "get": {
                "tags": [
                    "Offline"
                ],
                "summary": "Get offline content list",
                "description": "Get list of content marked for offline access",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Offline content list"
                    }
                }
            }
        },
        "/api/offline/content/download": {
            "post": {
                "tags": [
                    "Offline"
                ],
                "summary": "Mark content for offline download",
                "description": "Mark specific content to be available offline",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "contentId",
                                    "contentType"
                                ],
                                "properties": {
                                    "contentId": {
                                        "type": "string"
                                    },
                                    "contentType": {
                                        "type": "string",
                                        "enum": [
                                            "class",
                                            "program",
                                            "podcast"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Content marked for download"
                    }
                }
            }
        },
        "/api/offline/content/{contentId}": {
            "delete": {
                "tags": [
                    "Offline"
                ],
                "summary": "Remove offline content",
                "description": "Remove content from offline storage",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "contentId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Content removed"
                    }
                }
            }
        },
        "/api/offline/content/batch": {
            "post": {
                "tags": [
                    "Offline"
                ],
                "summary": "Get multiple contents for offline",
                "description": "Get full content data for multiple items",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "contentIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Content data"
                    }
                }
            }
        },
        "/api/password-reset/request": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Request password reset email",
                "description": "Sends a password reset email if the account exists. Always returns success to prevent email enumeration.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Request processed (always returns success)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid email format"
                    }
                }
            }
        },
        "/api/password-reset/validate/{token}": {
            "get": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Validate reset token",
                "description": "Checks if a password reset token is valid and not expired",
                "parameters": [
                    {
                        "in": "path",
                        "name": "token",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The password reset token"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token validation result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "valid": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/password-reset/reset": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Reset password with token",
                "description": "Resets the user password using a valid reset token",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "token",
                                    "newPassword"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "description": "The password reset token from email"
                                    },
                                    "newPassword": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "description": "New password (min 8 chars, must include uppercase, lowercase, and number)"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid or expired token, or invalid password format"
                    }
                }
            }
        },
        "/api/payments/checkout": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Start a checkout session for a subscription plan",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CheckoutRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Checkout session created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "checkout": {
                                            "$ref": "#/components/schemas/CheckoutResponse"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/payments/webhook/stripe": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Stripe webhook endpoint",
                "description": "Accepts Stripe webhook events (invoice.paid, customer.subscription.updated, payment_failed).",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StripeWebhookPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook processed successfully."
                    }
                }
            }
        },
        "/api/payments": {
            "get": {
                "summary": "Get user's payment history",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment history"
                    }
                }
            }
        },
        "/api/payments/{paymentId}": {
            "get": {
                "summary": "Get single payment",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "paymentId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment details"
                    },
                    "404": {
                        "description": "Payment not found"
                    }
                }
            }
        },
        "/api/payments/{paymentId}/refunds": {
            "get": {
                "summary": "Get refunds for a payment",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "paymentId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of refunds"
                    }
                }
            }
        },
        "/api/payments/methods": {
            "get": {
                "summary": "Get user's payment methods",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of payment methods"
                    }
                }
            }
        },
        "/api/payments/methods/add": {
            "post": {
                "summary": "Add new payment method",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "paymentMethodId"
                                ],
                                "properties": {
                                    "paymentMethodId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Payment method added"
                    }
                }
            }
        },
        "/api/payments/methods/{paymentMethodId}": {
            "delete": {
                "summary": "Remove payment method",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "paymentMethodId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment method removed"
                    }
                }
            }
        },
        "/api/payments/methods/default": {
            "post": {
                "summary": "Set default payment method",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "paymentMethodId"
                                ],
                                "properties": {
                                    "paymentMethodId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Default payment method set"
                    }
                }
            }
        },
        "/api/payments/setup-intent": {
            "post": {
                "summary": "Create setup intent for adding payment method",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Setup intent created"
                    }
                }
            }
        },
        "/api/payments/refund": {
            "post": {
                "summary": "Request a refund",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "paymentId"
                                ],
                                "properties": {
                                    "paymentId": {
                                        "type": "string"
                                    },
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Refund requested"
                    }
                }
            }
        },
        "/api/payments/admin/all": {
            "get": {
                "summary": "Get all payments (admin)",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "provider",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "All payments"
                    }
                }
            }
        },
        "/api/payments/admin/refund": {
            "post": {
                "summary": "Process refund (admin)",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "paymentId"
                                ],
                                "properties": {
                                    "paymentId": {
                                        "type": "string"
                                    },
                                    "amount": {
                                        "type": "number"
                                    },
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Refund processed"
                    }
                }
            }
        },
        "/api/payments/admin/stats": {
            "get": {
                "summary": "Get payment statistics (admin)",
                "tags": [
                    "Payments"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payment statistics"
                    }
                }
            }
        },
        "/api/admin/payment-integrations": {
            "get": {
                "tags": [
                    "Payment Integrations"
                ],
                "summary": "Get all payment integrations",
                "description": "Returns list of all payment provider integrations (SUPER_ADMIN only)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of payment integrations"
                    },
                    "403": {
                        "description": "Super Admin access required"
                    }
                }
            },
            "put": {
                "tags": [
                    "Payment Integrations"
                ],
                "summary": "Update payment integration",
                "description": "Configure or update a payment provider (SUPER_ADMIN only)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "provider"
                                ],
                                "properties": {
                                    "provider": {
                                        "type": "string",
                                        "enum": [
                                            "stripe",
                                            "paypal",
                                            "iyzico",
                                            "apple",
                                            "google"
                                        ]
                                    },
                                    "apiKey": {
                                        "type": "string"
                                    },
                                    "secretKey": {
                                        "type": "string"
                                    },
                                    "webhookSecret": {
                                        "type": "string"
                                    },
                                    "sandboxMode": {
                                        "type": "boolean"
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Integration updated"
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "403": {
                        "description": "Super Admin access required"
                    }
                }
            }
        },
        "/api/admin/payment-integrations/{provider}": {
            "get": {
                "tags": [
                    "Payment Integrations"
                ],
                "summary": "Get single payment integration details",
                "description": "Returns full details of a specific provider (SUPER_ADMIN only)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "provider",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "stripe",
                                "paypal",
                                "iyzico",
                                "apple",
                                "google"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Integration details"
                    },
                    "403": {
                        "description": "Super Admin access required"
                    }
                }
            }
        },
        "/api/admin/payment-integrations/{provider}/toggle": {
            "post": {
                "tags": [
                    "Payment Integrations"
                ],
                "summary": "Toggle integration active status",
                "description": "Enable or disable a payment provider (SUPER_ADMIN only)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "provider",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Status toggled"
                    },
                    "400": {
                        "description": "Cannot enable without API keys"
                    },
                    "403": {
                        "description": "Super Admin access required"
                    },
                    "404": {
                        "description": "Integration not configured"
                    }
                }
            }
        },
        "/api/admin/payment-integrations/{provider}/test": {
            "post": {
                "tags": [
                    "Payment Integrations"
                ],
                "summary": "Test integration connection",
                "description": "Verify that the integration is properly configured (SUPER_ADMIN only)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "provider",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Test result"
                    },
                    "400": {
                        "description": "API keys not configured"
                    },
                    "403": {
                        "description": "Super Admin access required"
                    },
                    "404": {
                        "description": "Integration not configured"
                    }
                }
            }
        },
        "/api/payment-webhooks/stripe": {
            "post": {
                "summary": "Stripe webhook endpoint",
                "tags": [
                    "Payment Webhooks"
                ],
                "description": "Receives Stripe webhook events. Requires raw body for signature verification.",
                "responses": {
                    "200": {
                        "description": "Webhook processed successfully"
                    },
                    "400": {
                        "description": "Invalid signature or payload"
                    },
                    "500": {
                        "description": "Processing error"
                    }
                }
            }
        },
        "/api/payment-webhooks/apple": {
            "post": {
                "summary": "Apple App Store Server Notifications V2",
                "tags": [
                    "Payment Webhooks"
                ],
                "description": "Receives App Store Server Notifications V2 for subscription events.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "signedPayload": {
                                        "type": "string",
                                        "description": "JWS signed notification payload"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Notification processed"
                    },
                    "400": {
                        "description": "Invalid payload"
                    }
                }
            }
        },
        "/api/payment-webhooks/apple/v1": {
            "post": {
                "summary": "Apple App Store Server Notifications V1 (Legacy)",
                "tags": [
                    "Payment Webhooks"
                ],
                "description": "Legacy endpoint for V1 notifications. Use V2 for new implementations.",
                "responses": {
                    "200": {
                        "description": "Notification received"
                    }
                }
            }
        },
        "/api/payment-webhooks/google": {
            "post": {
                "summary": "Google Play Real-time Developer Notifications",
                "tags": [
                    "Payment Webhooks"
                ],
                "description": "Receives Google Play RTDN via Cloud Pub/Sub push subscription.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "data": {
                                                "type": "string",
                                                "description": "Base64 encoded notification data"
                                            },
                                            "messageId": {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Notification processed"
                    },
                    "400": {
                        "description": "Invalid payload"
                    }
                }
            }
        },
        "/api/payment-webhooks/google/voided": {
            "post": {
                "summary": "Google Play Voided Purchases",
                "tags": [
                    "Payment Webhooks"
                ],
                "description": "Endpoint for voided purchases notifications.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "packageName": {
                                        "type": "string"
                                    },
                                    "voidedPurchases": {
                                        "type": "array",
                                        "items": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Voided purchases processed"
                    }
                }
            }
        },
        "/api/planner": {
            "get": {
                "tags": [
                    "Planner"
                ],
                "summary": "Get planner entries for the current week",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "weekStart",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "description": "ISO date representing the start of the week (defaults to today)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Planner entries for the specified week.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "entries": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/PlannerEntry"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/planner/entries": {
            "post": {
                "tags": [
                    "Planner"
                ],
                "summary": "Create a planner entry",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PlannerEntryCreateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Planner entry created."
                    }
                }
            }
        },
        "/api/planner/entries/{entryId}": {
            "delete": {
                "tags": [
                    "Planner"
                ],
                "summary": "Delete a planner entry",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "entryId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Planner entry deleted."
                    }
                }
            }
        },
        "/api/podcasts": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "List all published podcasts",
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "in": "query",
                        "name": "category",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "WELLNESS",
                                "MEDITATION",
                                "YOGA_INSTRUCTION",
                                "BREATHWORK",
                                "PHILOSOPHY",
                                "INTERVIEWS",
                                "MUSIC",
                                "STORIES",
                                "GUIDED_PRACTICE",
                                "MINDFULNESS"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "q",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Search query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of podcasts with pagination"
                    }
                }
            }
        },
        "/api/podcasts/featured": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get featured podcasts",
                "responses": {
                    "200": {
                        "description": "Featured podcasts list"
                    }
                }
            }
        },
        "/api/podcasts/latest-episodes": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get latest episodes across all podcasts",
                "responses": {
                    "200": {
                        "description": "Latest episodes list"
                    }
                }
            }
        },
        "/api/podcasts/popular-episodes": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get most popular episodes",
                "responses": {
                    "200": {
                        "description": "Popular episodes list"
                    }
                }
            }
        },
        "/api/podcasts/{slug}": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get podcast details by slug",
                "parameters": [
                    {
                        "in": "path",
                        "name": "slug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Podcast details"
                    },
                    "404": {
                        "description": "Podcast not found"
                    }
                }
            }
        },
        "/api/podcasts/{slug}/episodes": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "List episodes for a podcast",
                "parameters": [
                    {
                        "in": "path",
                        "name": "slug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Episodes list with pagination"
                    }
                }
            }
        },
        "/api/podcasts/{podcastSlug}/episodes/{episodeSlug}": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get episode details",
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastSlug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "path",
                        "name": "episodeSlug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Episode details with progress if authenticated"
                    }
                }
            }
        },
        "/api/podcasts/{slug}/rss": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get RSS feed for a podcast",
                "description": "Returns an RSS 2.0 compatible feed for podcast apps and directories",
                "parameters": [
                    {
                        "in": "path",
                        "name": "slug",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RSS XML feed",
                        "content": {
                            "application/rss+xml": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Podcast not found or RSS not enabled"
                    }
                }
            }
        },
        "/api/podcasts/me/subscriptions": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get user's podcast subscriptions",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User's subscriptions"
                    }
                }
            }
        },
        "/api/podcasts/me/history": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get user's listen history",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listen history"
                    }
                }
            }
        },
        "/api/podcasts/me/liked": {
            "get": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Get user's liked episodes",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liked episodes"
                    }
                }
            }
        },
        "/api/podcasts/{podcastId}/subscribe": {
            "post": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Subscribe to a podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Subscription created"
                    }
                }
            }
        },
        "/api/podcasts/{podcastId}/unsubscribe": {
            "delete": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Unsubscribe from a podcast",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "podcastId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Unsubscribed successfully"
                    }
                }
            }
        },
        "/api/podcasts/episodes/{episodeId}/progress": {
            "post": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Record listen progress for an episode",
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "progress": {
                                        "type": "integer"
                                    },
                                    "duration": {
                                        "type": "integer"
                                    },
                                    "completed": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Progress recorded"
                    }
                }
            }
        },
        "/api/podcasts/episodes/{episodeId}/like": {
            "post": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Like an episode",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Episode liked"
                    }
                }
            }
        },
        "/api/podcasts/episodes/{episodeId}/unlike": {
            "delete": {
                "tags": [
                    "Podcasts"
                ],
                "summary": "Unlike an episode",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "episodeId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Episode unliked"
                    }
                }
            }
        },
        "/api/poses": {
            "get": {
                "tags": [
                    "Poses"
                ],
                "summary": "List poses with optional filters",
                "parameters": [
                    {
                        "in": "query",
                        "name": "difficulty",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "BEGINNER",
                                "INTERMEDIATE",
                                "ADVANCED"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "bodyArea",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "q",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Search term across english/sanskrit names and description"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of poses matching filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "poses": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Pose"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/poses/{poseId}": {
            "get": {
                "tags": [
                    "Poses"
                ],
                "summary": "Get pose details",
                "parameters": [
                    {
                        "in": "path",
                        "name": "poseId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pose detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pose": {
                                            "$ref": "#/components/schemas/Pose"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pose not found."
                    }
                }
            }
        },
        "/api/programs": {
            "get": {
                "tags": [
                    "Programs"
                ],
                "summary": "List yoga programs",
                "parameters": [
                    {
                        "in": "query",
                        "name": "level",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "BEGINNER",
                                "INTERMEDIATE",
                                "ADVANCED"
                            ]
                        },
                        "description": "Filter programs by level"
                    },
                    {
                        "in": "query",
                        "name": "durationMax",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Maximum program duration in minutes"
                    },
                    {
                        "in": "query",
                        "name": "tag",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter by tag slug"
                    },
                    {
                        "in": "query",
                        "name": "q",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Search within program title and description"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "A list of programs matching the filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "programs": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProgramSummary"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/programs/{id}": {
            "get": {
                "tags": [
                    "Programs"
                ],
                "summary": "Get program details",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detailed information about a program.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "program": {
                                            "$ref": "#/components/schemas/ProgramDetail"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Program not found."
                    }
                }
            }
        },
        "/api/progress/summary": {
            "get": {
                "tags": [
                    "Progress"
                ],
                "summary": "Get a summary of the current user's progress",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Progress summary including total minutes and streak.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "summary": {
                                            "$ref": "#/components/schemas/ProgressSummary"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications/status": {
            "get": {
                "tags": [
                    "Push Notifications"
                ],
                "summary": "Get push notification service status",
                "description": "Check if Firebase push notifications are configured",
                "responses": {
                    "200": {
                        "description": "Service status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "configured": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications/devices": {
            "post": {
                "tags": [
                    "Push Notifications"
                ],
                "summary": "Register a device for push notifications",
                "description": "Register a device token to receive push notifications",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "token",
                                    "platform"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "description": "FCM device token"
                                    },
                                    "platform": {
                                        "type": "string",
                                        "enum": [
                                            "IOS",
                                            "ANDROID",
                                            "WEB"
                                        ]
                                    },
                                    "deviceName": {
                                        "type": "string",
                                        "description": "Optional device name for identification",
                                        "example": "iPhone 15 Pro"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Device registered successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "device": {
                                            "$ref": "#/components/schemas/DeviceToken"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Push Notifications"
                ],
                "summary": "Unregister a device",
                "description": "Remove a device from push notification list",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "description": "FCM device token to remove"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "Device unregistered successfully"
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "404": {
                        "description": "Device not found"
                    }
                }
            },
            "get": {
                "tags": [
                    "Push Notifications"
                ],
                "summary": "Get registered devices",
                "description": "List all devices registered for push notifications",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of registered devices",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "devices": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/DeviceToken"
                                            }
                                        },
                                        "count": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/admin/rate-limit/blocked-ips": {
            "get": {
                "summary": "Get list of blocked IPs",
                "tags": [
                    "Rate Limit"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of blocked IPs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "string"
                                                    },
                                                    "ipAddress": {
                                                        "type": "string"
                                                    },
                                                    "reason": {
                                                        "type": "string"
                                                    },
                                                    "blockedBy": {
                                                        "type": "string"
                                                    },
                                                    "blockedAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "expiresAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "isActive": {
                                                        "type": "boolean"
                                                    }
                                                }
                                            }
                                        },
                                        "count": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/rate-limit/block-ip": {
            "post": {
                "summary": "Block an IP address",
                "tags": [
                    "Rate Limit"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "ipAddress",
                                    "reason"
                                ],
                                "properties": {
                                    "ipAddress": {
                                        "type": "string",
                                        "description": "IP address to block",
                                        "example": "192.168.1.100"
                                    },
                                    "reason": {
                                        "type": "string",
                                        "description": "Reason for blocking",
                                        "example": "Suspicious activity detected"
                                    },
                                    "expiresAt": {
                                        "type": "string",
                                        "format": "date-time",
                                        "description": "When the block expires (optional, null = permanent)",
                                        "example": "2024-12-31T23:59:59Z"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "IP blocked successfully"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/rate-limit/block-ip/{ipAddress}": {
            "delete": {
                "summary": "Unblock an IP address",
                "tags": [
                    "Rate Limit"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "ipAddress",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "IP address to unblock"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "IP unblocked successfully"
                    },
                    "400": {
                        "description": "Invalid IP address"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/rate-limit/stats": {
            "get": {
                "summary": "Get rate limit statistics",
                "tags": [
                    "Rate Limit"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "startDate",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "description": "Start date for filtering"
                    },
                    {
                        "in": "query",
                        "name": "endDate",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        },
                        "description": "End date for filtering"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rate limit statistics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "totalBlocked": {
                                                    "type": "integer"
                                                },
                                                "blockedByEndpoint": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "endpoint": {
                                                                "type": "string"
                                                            },
                                                            "count": {
                                                                "type": "integer"
                                                            }
                                                        }
                                                    }
                                                },
                                                "blockedByIdentifier": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "identifier": {
                                                                "type": "string"
                                                            },
                                                            "count": {
                                                                "type": "integer"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    }
                }
            }
        },
        "/api/admin/rate-limit/reset/{userId}": {
            "post": {
                "summary": "Reset rate limits for a user",
                "tags": [
                    "Rate Limit"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "userId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "User ID whose rate limits should be reset"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rate limits reset successfully"
                    },
                    "400": {
                        "description": "Invalid user ID"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - Admin only"
                    },
                    "500": {
                        "description": "Failed to reset (Redis may not be available)"
                    }
                }
            }
        },
        "/api/reminders": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Schedule a reminder for a class or program session",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ReminderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reminder scheduled."
                    }
                }
            }
        },
        "/api/search": {
            "get": {
                "tags": [
                    "Search"
                ],
                "summary": "Search programs by title and description",
                "parameters": [
                    {
                        "in": "query",
                        "name": "q",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Search keyword (case insensitive)"
                    },
                    {
                        "in": "query",
                        "name": "level",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "BEGINNER",
                                "INTERMEDIATE",
                                "ADVANCED"
                            ]
                        },
                        "description": "Filter by level"
                    },
                    {
                        "in": "query",
                        "name": "durationMax",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Maximum duration in minutes"
                    },
                    {
                        "in": "query",
                        "name": "tag",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter by tag slug"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Programs that match the search criteria.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "programs": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProgramSummary"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/sms/send-otp": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Send OTP code",
                "description": "Send an OTP code to a phone number. Rate limited to 1 per minute, 5 per hour.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "phoneNumber",
                                    "purpose"
                                ],
                                "properties": {
                                    "phoneNumber": {
                                        "type": "string",
                                        "description": "Phone number in E.164 format or local format",
                                        "example": "+905551234567"
                                    },
                                    "purpose": {
                                        "$ref": "#/components/schemas/OtpPurpose"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP sent successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OtpResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    }
                }
            }
        },
        "/api/sms/verify-otp": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Verify OTP code",
                "description": "Verify an OTP code. Rate limited to prevent brute force.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "phoneNumber",
                                    "code",
                                    "purpose"
                                ],
                                "properties": {
                                    "phoneNumber": {
                                        "type": "string",
                                        "example": "+905551234567"
                                    },
                                    "code": {
                                        "type": "string",
                                        "description": "6-digit OTP code",
                                        "example": "123456"
                                    },
                                    "purpose": {
                                        "$ref": "#/components/schemas/OtpPurpose"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP verified successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "verified": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid OTP or validation error"
                    },
                    "429": {
                        "description": "Too many verification attempts"
                    }
                }
            }
        },
        "/api/sms/resend-otp": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Resend OTP code",
                "description": "Resend OTP code. Must wait 1 minute between requests.",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "phoneNumber",
                                    "purpose"
                                ],
                                "properties": {
                                    "phoneNumber": {
                                        "type": "string",
                                        "example": "+905551234567"
                                    },
                                    "purpose": {
                                        "$ref": "#/components/schemas/OtpPurpose"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP resent successfully"
                    },
                    "429": {
                        "description": "Rate limit - must wait before resending"
                    }
                }
            }
        },
        "/api/sms/verify-phone": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Verify user's phone number",
                "description": "Verify the authenticated user's phone number with OTP",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "code"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string",
                                        "description": "6-digit OTP code",
                                        "example": "123456"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Phone verified successfully"
                    },
                    "400": {
                        "description": "Invalid OTP or no phone to verify"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/sms/send-verification": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Send phone verification OTP",
                "description": "Send OTP to the authenticated user's phone for verification",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Verification OTP sent"
                    },
                    "400": {
                        "description": "No phone number or already verified"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/sms/phone": {
            "put": {
                "tags": [
                    "SMS"
                ],
                "summary": "Update phone number",
                "description": "Update the authenticated user's phone number. Sends verification OTP.",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "phoneNumber"
                                ],
                                "properties": {
                                    "phoneNumber": {
                                        "type": "string",
                                        "example": "+905551234567"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Phone updated, verification OTP sent"
                    },
                    "400": {
                        "description": "Phone number in use or validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/sms/status": {
            "get": {
                "tags": [
                    "SMS"
                ],
                "summary": "Get SMS service status",
                "description": "Check if SMS service is configured and enabled",
                "responses": {
                    "200": {
                        "description": "SMS service status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "configured": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/sms/webhook/twilio": {
            "post": {
                "tags": [
                    "SMS"
                ],
                "summary": "Twilio webhook for delivery status",
                "description": "Receives delivery status updates from Twilio",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "MessageSid": {
                                        "type": "string"
                                    },
                                    "MessageStatus": {
                                        "type": "string"
                                    },
                                    "ErrorCode": {
                                        "type": "string"
                                    },
                                    "ErrorMessage": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook processed"
                    }
                }
            }
        },
        "/api/subscription": {
            "get": {
                "summary": "Get current user's subscription",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Current subscription"
                    }
                }
            }
        },
        "/api/subscription/status": {
            "get": {
                "summary": "Get subscription status",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription status details"
                    }
                }
            }
        },
        "/api/subscription/history": {
            "get": {
                "summary": "Get subscription history",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription history"
                    }
                }
            }
        },
        "/api/subscription/check": {
            "get": {
                "summary": "Check if user has active subscription",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Active subscription check result"
                    }
                }
            }
        },
        "/api/subscription/checkout": {
            "post": {
                "summary": "Create Stripe checkout session",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "planId"
                                ],
                                "properties": {
                                    "planId": {
                                        "type": "string"
                                    },
                                    "interval": {
                                        "type": "string",
                                        "enum": [
                                            "monthly",
                                            "yearly"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Checkout session created"
                    }
                }
            }
        },
        "/api/subscription/apple/verify": {
            "post": {
                "summary": "Verify Apple purchase",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "receiptData",
                                    "productId"
                                ],
                                "properties": {
                                    "receiptData": {
                                        "type": "string"
                                    },
                                    "productId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchase verified"
                    },
                    "400": {
                        "description": "Verification failed"
                    }
                }
            }
        },
        "/api/subscription/apple/restore": {
            "post": {
                "summary": "Restore Apple purchases",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "receiptData"
                                ],
                                "properties": {
                                    "receiptData": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchases restored"
                    }
                }
            }
        },
        "/api/subscription/google/verify": {
            "post": {
                "summary": "Verify Google Play purchase",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "purchaseToken",
                                    "productId"
                                ],
                                "properties": {
                                    "purchaseToken": {
                                        "type": "string"
                                    },
                                    "productId": {
                                        "type": "string"
                                    },
                                    "isSubscription": {
                                        "type": "boolean",
                                        "default": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchase verified"
                    },
                    "400": {
                        "description": "Verification failed"
                    }
                }
            }
        },
        "/api/subscription/google/restore": {
            "post": {
                "summary": "Restore Google Play purchases",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "purchases"
                                ],
                                "properties": {
                                    "purchases": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "purchaseToken": {
                                                    "type": "string"
                                                },
                                                "productId": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchases restored"
                    }
                }
            }
        },
        "/api/subscription/cancel": {
            "post": {
                "summary": "Cancel subscription",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "subscriptionId"
                                ],
                                "properties": {
                                    "subscriptionId": {
                                        "type": "string"
                                    },
                                    "reason": {
                                        "type": "string"
                                    },
                                    "immediate": {
                                        "type": "boolean",
                                        "default": false
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Subscription cancelled"
                    }
                }
            }
        },
        "/api/subscription/resume": {
            "post": {
                "summary": "Resume cancelled subscription",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "subscriptionId"
                                ],
                                "properties": {
                                    "subscriptionId": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Subscription resumed"
                    }
                }
            }
        },
        "/api/subscription/change-plan": {
            "post": {
                "summary": "Change subscription plan",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "subscriptionId",
                                    "newPlanId"
                                ],
                                "properties": {
                                    "subscriptionId": {
                                        "type": "string"
                                    },
                                    "newPlanId": {
                                        "type": "string"
                                    },
                                    "immediate": {
                                        "type": "boolean",
                                        "default": false
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Plan changed"
                    }
                }
            }
        },
        "/api/subscription/admin/{subscriptionId}": {
            "get": {
                "summary": "Get subscription by ID (admin)",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "subscriptionId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription details"
                    }
                }
            }
        },
        "/api/subscription/admin/grant": {
            "post": {
                "summary": "Grant subscription to user (admin)",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "userId",
                                    "planId",
                                    "durationDays"
                                ],
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "planId": {
                                        "type": "string"
                                    },
                                    "durationDays": {
                                        "type": "integer"
                                    },
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Subscription granted"
                    }
                }
            }
        },
        "/api/subscription/admin/extend": {
            "post": {
                "summary": "Extend subscription (admin)",
                "tags": [
                    "Subscription"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "subscriptionId",
                                    "additionalDays"
                                ],
                                "properties": {
                                    "subscriptionId": {
                                        "type": "string"
                                    },
                                    "additionalDays": {
                                        "type": "integer"
                                    },
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Subscription extended"
                    }
                }
            }
        },
        "/api/plans": {
            "get": {
                "summary": "Get all subscription plans",
                "tags": [
                    "Subscription Plans"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "includeInactive",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Include inactive plans (admin only)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of subscription plans"
                    }
                }
            },
            "post": {
                "summary": "Create new subscription plan",
                "tags": [
                    "Subscription Plans"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "tier",
                                    "priceMonthly",
                                    "priceYearly"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "tier": {
                                        "type": "string",
                                        "enum": [
                                            "FREE",
                                            "BASIC",
                                            "PREMIUM",
                                            "ENTERPRISE"
                                        ]
                                    },
                                    "priceMonthly": {
                                        "type": "number"
                                    },
                                    "priceYearly": {
                                        "type": "number"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "features": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Plan created"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Admin access required"
                    }
                }
            }
        },
        "/api/plans/client": {
            "get": {
                "summary": "Get plans formatted for client",
                "tags": [
                    "Subscription Plans"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "platform",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ios",
                                "android",
                                "web"
                            ]
                        },
                        "description": "Platform for pricing"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Client-formatted plans"
                    }
                }
            }
        },
        "/api/plans/{planId}": {
            "get": {
                "summary": "Get single plan by ID",
                "tags": [
                    "Subscription Plans"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "planId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Plan details"
                    },
                    "404": {
                        "description": "Plan not found"
                    }
                }
            },
            "put": {
                "summary": "Update subscription plan",
                "tags": [
                    "Subscription Plans"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "planId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "priceMonthly": {
                                        "type": "number"
                                    },
                                    "priceYearly": {
                                        "type": "number"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "features": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Plan updated"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Admin access required"
                    },
                    "404": {
                        "description": "Plan not found"
                    }
                }
            },
            "delete": {
                "summary": "Soft delete subscription plan",
                "tags": [
                    "Subscription Plans"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "planId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Plan deleted"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Admin access required"
                    }
                }
            }
        },
        "/api/plans/{planId}/hard-delete": {
            "delete": {
                "summary": "Permanently delete subscription plan",
                "tags": [
                    "Subscription Plans"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "planId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Plan permanently deleted"
                    },
                    "400": {
                        "description": "Plan has active subscriptions"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Admin access required"
                    }
                }
            }
        },
        "/api/plans/{planId}/sync-stripe": {
            "post": {
                "summary": "Sync plan with Stripe",
                "tags": [
                    "Subscription Plans"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "planId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Plan synced with Stripe"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Admin access required"
                    }
                }
            }
        },
        "/api/tags": {
            "get": {
                "tags": [
                    "Tags"
                ],
                "summary": "List available tags grouped by kind",
                "responses": {
                    "200": {
                        "description": "Tags grouped by LEVEL, FOCUS, and EQUIPMENT.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "tags": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "$ref": "#/components/schemas/Tag"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/signup": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Register a new user account",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SignupRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User created successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Email already in use.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/login": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Authenticate user and issue tokens",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid credentials.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/logout": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Logout user and invalidate tokens",
                "description": "Clears HttpOnly auth cookies and revokes refresh token",
                "responses": {
                    "200": {
                        "description": "Logout successful.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logged out successfully"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/refresh-token": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Refresh access token using refresh token",
                "description": "Uses HttpOnly cookie or request body to get new token pair",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "refreshToken": {
                                        "type": "string",
                                        "description": "Refresh token (optional, can use cookie instead)"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tokens refreshed successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuthResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Refresh token required."
                    },
                    "403": {
                        "description": "Invalid or expired refresh token."
                    }
                }
            }
        },
        "/api/users/me": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Retrieve the authenticated user's profile",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the current user's profile.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required."
                    }
                }
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update own profile",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully."
                    }
                }
            }
        },
        "/api/users/me/change-password": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Change own password",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "currentPassword",
                                    "newPassword"
                                ],
                                "properties": {
                                    "currentPassword": {
                                        "type": "string"
                                    },
                                    "newPassword": {
                                        "type": "string",
                                        "minLength": 8
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password changed successfully."
                    },
                    "400": {
                        "description": "Current password is incorrect."
                    }
                }
            }
        },
        "/api/users/me/delete": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete own account",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "password"
                                ],
                                "properties": {
                                    "password": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Account deleted successfully."
                    },
                    "400": {
                        "description": "Password is incorrect."
                    }
                }
            }
        },
        "/api/users/me/avatar-upload-url": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Get presigned URL for avatar upload",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "filename",
                                    "contentType"
                                ],
                                "properties": {
                                    "filename": {
                                        "type": "string"
                                    },
                                    "contentType": {
                                        "type": "string",
                                        "enum": [
                                            "image/jpeg",
                                            "image/png",
                                            "image/webp",
                                            "image/gif"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Returns presigned upload URL.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "uploadUrl": {
                                            "type": "string"
                                        },
                                        "fileUrl": {
                                            "type": "string"
                                        },
                                        "expiresAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid file type."
                    }
                }
            }
        },
        "/api/users/{id}": {
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update user profile information",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "string"
                        },
                        "required": true,
                        "description": "User identifier"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Insufficient permissions."
                    },
                    "404": {
                        "description": "User not found."
                    }
                }
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete a user account",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "string"
                        },
                        "required": true,
                        "description": "User identifier"
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Account deleted successfully."
                    },
                    "403": {
                        "description": "Insufficient permissions."
                    },
                    "404": {
                        "description": "User not found."
                    }
                }
            }
        },
        "/api/progress/video": {
            "put": {
                "tags": [
                    "Video Progress"
                ],
                "summary": "Update video watching progress",
                "description": "Save or update the current watching position for a lesson. Automatically marks as completed when 90%+ watched.",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "lessonId",
                                    "lessonType",
                                    "currentTime",
                                    "duration"
                                ],
                                "properties": {
                                    "lessonId": {
                                        "type": "string",
                                        "description": "ID of the program session or class"
                                    },
                                    "lessonType": {
                                        "type": "string",
                                        "enum": [
                                            "PROGRAM_SESSION",
                                            "CLASS"
                                        ]
                                    },
                                    "currentTime": {
                                        "type": "integer",
                                        "description": "Current playback position in seconds",
                                        "example": 120
                                    },
                                    "duration": {
                                        "type": "integer",
                                        "description": "Total video duration in seconds",
                                        "example": 1800
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Progress updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "progress": {
                                            "$ref": "#/components/schemas/VideoProgress"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            },
            "get": {
                "tags": [
                    "Video Progress"
                ],
                "summary": "Get all video progress for current user",
                "description": "Returns paginated list of all video progress records",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "lessonType",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PROGRAM_SESSION",
                                "CLASS"
                            ]
                        },
                        "description": "Filter by lesson type"
                    },
                    {
                        "in": "query",
                        "name": "completedOnly",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Only return completed lessons"
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User progress list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "items": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/VideoProgress"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        },
                                        "page": {
                                            "type": "integer"
                                        },
                                        "limit": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/progress/video/{lessonId}": {
            "get": {
                "tags": [
                    "Video Progress"
                ],
                "summary": "Get progress for a specific lesson",
                "description": "Returns the watching progress for a specific lesson (resume from where you left)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "lessonId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "ID of the program session or class"
                    },
                    {
                        "in": "query",
                        "name": "lessonType",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PROGRAM_SESSION",
                                "CLASS"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lesson progress",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "progress": {
                                            "$ref": "#/components/schemas/VideoProgress"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Video Progress"
                ],
                "summary": "Reset progress for a lesson",
                "description": "Delete progress record to start fresh",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "lessonId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "lessonType",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PROGRAM_SESSION",
                                "CLASS"
                            ]
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Progress reset successfully"
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "404": {
                        "description": "No progress found"
                    }
                }
            }
        },
        "/api/progress/video/{lessonId}/complete": {
            "post": {
                "tags": [
                    "Video Progress"
                ],
                "summary": "Mark a lesson as completed",
                "description": "Manually mark a lesson as completed (100% progress)",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "lessonId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "lessonType"
                                ],
                                "properties": {
                                    "lessonType": {
                                        "type": "string",
                                        "enum": [
                                            "PROGRAM_SESSION",
                                            "CLASS"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Lesson marked as completed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "progress": {
                                            "$ref": "#/components/schemas/VideoProgress"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Authentication required"
                    }
                }
            }
        },
        "/api/webhooks/events": {
            "get": {
                "summary": "Get available webhook events",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of available webhook events"
                    }
                }
            }
        },
        "/api/webhooks/endpoints": {
            "get": {
                "summary": "List all webhook endpoints",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of webhook endpoints"
                    }
                }
            },
            "post": {
                "summary": "Create a new webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "url",
                                    "events"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "url": {
                                        "type": "string"
                                    },
                                    "events": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Webhook endpoint created"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}": {
            "get": {
                "summary": "Get a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Webhook endpoint details"
                    }
                }
            },
            "put": {
                "summary": "Update a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "url": {
                                        "type": "string"
                                    },
                                    "events": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook endpoint updated"
                    }
                }
            },
            "delete": {
                "summary": "Delete a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Webhook endpoint deleted"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/test": {
            "post": {
                "summary": "Test a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Test webhook queued"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/rotate-secret": {
            "post": {
                "summary": "Rotate webhook secret",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Secret rotated"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/enable": {
            "post": {
                "summary": "Enable a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint enabled"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/disable": {
            "post": {
                "summary": "Disable a webhook endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Endpoint disabled"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/stats": {
            "get": {
                "summary": "Get delivery statistics for an endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delivery statistics"
                    }
                }
            }
        },
        "/api/webhooks/endpoints/{endpointId}/deliveries": {
            "get": {
                "summary": "List deliveries for an endpoint",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "endpointId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PENDING",
                                "SENDING",
                                "DELIVERED",
                                "FAILED"
                            ]
                        }
                    },
                    {
                        "in": "query",
                        "name": "event",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "in": "query",
                        "name": "limit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of deliveries"
                    }
                }
            }
        },
        "/api/webhooks/deliveries/{deliveryId}": {
            "get": {
                "summary": "Get delivery details",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "deliveryId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delivery details"
                    }
                }
            }
        },
        "/api/webhooks/deliveries/{deliveryId}/retry": {
            "post": {
                "summary": "Retry a failed delivery",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "deliveryId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retry initiated"
                    }
                }
            }
        },
        "/api/webhooks/deliveries/{deliveryId}/cancel": {
            "post": {
                "summary": "Cancel a pending delivery",
                "tags": [
                    "Webhooks"
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "deliveryId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delivery cancelled"
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "API Keys",
            "description": "API key management for authenticated users"
        },
        {
            "name": "Cache",
            "description": "Cache management endpoints (Admin only)"
        },
        {
            "name": "Invoices",
            "description": "Invoice management"
        },
        {
            "name": "NotificationPreferences",
            "description": "User notification preference management"
        },
        {
            "name": "Payments",
            "description": "Payment management"
        },
        {
            "name": "Payment Webhooks",
            "description": "Payment provider webhook endpoints"
        },
        {
            "name": "Rate Limit",
            "description": "Rate limit management (Admin only)"
        },
        {
            "name": "Subscription",
            "description": "Subscription management"
        },
        {
            "name": "Subscription Plans",
            "description": "Subscription plan management"
        }
    ]
}
